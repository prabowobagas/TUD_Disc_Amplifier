Version 4
SHEET 1 5520 2052
WIRE 16 -880 -112 -880
WIRE 208 -880 16 -880
WIRE 272 -880 208 -880
WIRE 432 -880 272 -880
WIRE 880 -880 432 -880
WIRE 1312 -880 880 -880
WIRE 1376 -880 1312 -880
WIRE 1472 -880 1376 -880
WIRE 208 -832 208 -880
WIRE 208 -832 192 -832
WIRE 880 -832 880 -880
WIRE 896 -832 880 -832
WIRE 1472 -832 1472 -880
WIRE 1472 -832 1456 -832
WIRE 320 -816 256 -816
WIRE 368 -816 320 -816
WIRE 432 -816 368 -816
WIRE 1184 -816 832 -816
WIRE 1520 -816 1184 -816
WIRE 1888 -816 1872 -816
WIRE 1936 -816 1888 -816
WIRE 2064 -816 2016 -816
WIRE 2096 -816 2064 -816
WIRE 2160 -816 2096 -816
WIRE 2272 -816 2240 -816
WIRE 2288 -816 2272 -816
WIRE 16 -800 16 -880
WIRE 16 -800 0 -800
WIRE 112 -784 64 -784
WIRE 192 -784 192 -832
WIRE 208 -784 192 -784
WIRE 896 -784 896 -832
WIRE 896 -784 880 -784
WIRE 1456 -784 1456 -832
WIRE 1472 -784 1456 -784
WIRE 0 -752 0 -800
WIRE 16 -752 0 -752
WIRE 880 -720 880 -736
WIRE 880 -720 816 -720
WIRE 992 -720 880 -720
WIRE 1088 -720 992 -720
WIRE 1360 -720 1264 -720
WIRE 1472 -720 1472 -736
WIRE 1472 -720 1360 -720
WIRE 1552 -720 1472 -720
WIRE 2032 -720 1952 -720
WIRE 2096 -720 2096 -816
WIRE 208 -704 208 -736
WIRE 272 -704 208 -704
WIRE 208 -688 208 -704
WIRE 208 -688 192 -688
WIRE 880 -688 880 -720
WIRE 896 -688 880 -688
WIRE 1472 -688 1472 -720
WIRE 1472 -688 1456 -688
WIRE 16 -672 16 -704
WIRE 112 -672 112 -784
WIRE 112 -672 16 -672
WIRE 256 -672 112 -672
WIRE 304 -672 256 -672
WIRE 832 -672 784 -672
WIRE 1536 -672 1520 -672
WIRE 1568 -672 1536 -672
WIRE 192 -640 192 -688
WIRE 208 -640 192 -640
WIRE 896 -640 896 -688
WIRE 896 -640 880 -640
WIRE 1456 -640 1456 -688
WIRE 1472 -640 1456 -640
WIRE 1552 -624 1552 -720
WIRE 1760 -624 1760 -656
WIRE 1760 -624 1552 -624
WIRE 1088 -608 1088 -720
WIRE 1264 -608 1264 -720
WIRE 592 -592 592 -656
WIRE 816 -592 816 -720
WIRE 816 -592 592 -592
WIRE 208 -560 208 -592
WIRE 368 -560 368 -816
WIRE 368 -560 208 -560
WIRE 16 -496 16 -672
WIRE 208 -496 208 -560
WIRE 832 -496 736 -496
WIRE 880 -496 880 -592
WIRE 880 -496 832 -496
WIRE 1472 -496 1472 -592
WIRE 1520 -496 1472 -496
WIRE 1552 -496 1520 -496
WIRE 1088 -480 1088 -608
WIRE 1264 -480 1264 -608
WIRE 1104 -432 1088 -432
WIRE 1264 -432 1248 -432
WIRE 1040 -400 1008 -400
WIRE 1344 -400 1312 -400
WIRE 208 -384 208 -416
WIRE 288 -384 208 -384
WIRE 1104 -384 1104 -432
WIRE 1104 -384 1088 -384
WIRE 1184 -384 1104 -384
WIRE 1248 -384 1248 -432
WIRE 1248 -384 1184 -384
WIRE 1264 -384 1248 -384
WIRE 208 -336 208 -384
WIRE 880 -336 880 -496
WIRE 1184 -336 1184 -384
WIRE 1472 -336 1472 -496
WIRE 208 -288 192 -288
WIRE 896 -288 880 -288
WIRE 1200 -288 1184 -288
WIRE 1472 -288 1456 -288
WIRE 16 -256 16 -416
WIRE 80 -256 16 -256
WIRE 256 -256 80 -256
WIRE 304 -256 256 -256
WIRE 336 -256 304 -256
WIRE 832 -256 800 -256
WIRE 1552 -256 1520 -256
WIRE 192 -240 192 -288
WIRE 208 -240 192 -240
WIRE 896 -240 896 -288
WIRE 896 -240 880 -240
WIRE 1200 -240 1200 -288
WIRE 1200 -240 1184 -240
WIRE 1456 -240 1456 -288
WIRE 1472 -240 1456 -240
WIRE 208 -208 208 -240
WIRE 256 -208 208 -208
WIRE 384 -208 256 -208
WIRE 608 -208 608 -240
WIRE 880 -208 880 -240
WIRE 880 -208 608 -208
WIRE 912 -208 880 -208
WIRE 1184 -208 1184 -240
WIRE 1200 -208 1184 -208
WIRE 1472 -208 1472 -240
WIRE 1472 -208 1456 -208
WIRE 1744 -208 1744 -240
WIRE 1744 -208 1472 -208
WIRE 16 -192 16 -256
WIRE 208 -192 208 -208
WIRE 880 -192 880 -208
WIRE 1184 -192 1184 -208
WIRE 1472 -192 1472 -208
WIRE 16 -144 0 -144
WIRE 208 -144 192 -144
WIRE 896 -144 880 -144
WIRE 1200 -144 1184 -144
WIRE 1472 -144 1456 -144
WIRE 80 -112 80 -256
WIRE 80 -112 64 -112
WIRE 288 -112 288 -384
WIRE 288 -112 256 -112
WIRE 384 -112 288 -112
WIRE 784 -112 384 -112
WIRE 832 -112 784 -112
WIRE 1104 -112 832 -112
WIRE 1136 -112 1104 -112
WIRE 1520 -112 1136 -112
WIRE 0 -96 0 -144
WIRE 16 -96 0 -96
WIRE 192 -96 192 -144
WIRE 208 -96 192 -96
WIRE 896 -96 896 -144
WIRE 896 -96 880 -96
WIRE 1200 -96 1200 -144
WIRE 1200 -96 1184 -96
WIRE 1456 -96 1456 -144
WIRE 1472 -96 1456 -96
WIRE 16 -48 16 -96
WIRE 208 -48 208 -96
WIRE 208 -48 16 -48
WIRE 384 -48 208 -48
WIRE 880 -48 880 -96
WIRE 880 -48 384 -48
WIRE 1184 -48 1184 -96
WIRE 1184 -48 880 -48
WIRE 1472 -48 1472 -96
WIRE 1472 -48 1184 -48
WIRE 1184 0 1184 -48
WIRE 416 160 368 160
WIRE 544 160 496 160
WIRE 256 240 224 240
WIRE 368 240 368 160
WIRE 368 240 336 240
WIRE 416 240 368 240
WIRE 544 240 544 160
WIRE 544 240 480 240
WIRE 224 336 224 240
WIRE 224 336 192 336
WIRE 272 336 224 336
WIRE 368 336 368 240
WIRE 368 336 336 336
WIRE 448 336 368 336
WIRE 544 336 544 240
WIRE 560 336 544 336
WIRE 720 336 560 336
WIRE 192 384 192 336
WIRE 48 496 -112 496
WIRE 192 496 192 464
WIRE 192 496 48 496
WIRE -112 528 -112 496
WIRE 192 608 192 576
WIRE 224 608 192 608
WIRE 256 608 224 608
WIRE 368 608 320 608
WIRE 416 608 368 608
WIRE 560 608 544 608
WIRE 704 608 560 608
WIRE 224 704 224 608
WIRE 240 704 224 704
WIRE 368 704 368 608
WIRE 368 704 320 704
WIRE 416 704 368 704
WIRE 544 704 544 608
WIRE 544 704 480 704
WIRE 368 784 368 704
WIRE 400 784 368 784
WIRE 544 784 544 704
WIRE 544 784 480 784
FLAG 1184 0 0
FLAG 1472 -880 Vdd_amp
FLAG 1184 -816 V_cm_fb
FLAG 1008 -400 Vin_p
FLAG 1344 -400 Vin_n
FLAG 2272 -816 Vo_p
FLAG 1888 -816 Vo_n
FLAG 784 -112 Vb_NMOS
FLAG 256 -208 Vn_bias
FLAG 336 -256 Vn_bias_casc
FLAG 1136 -256 Vn_bias_casc
FLAG 272 -704 Vp_bias
FLAG 272 -880 Vdd_bias
FLAG 1952 -640 0
FLAG 2064 -576 V_cm_fb
FLAG 2128 -656 Vdd_amp
FLAG 2128 -624 Vdd_bias
FLAG 1312 -880 Vdd
FLAG 304 -672 Vp_bias_casc
FLAG -112 -800 0
FLAG -112 608 0
FLAG 48 496 V_cm
FLAG 448 336 Vin_p
FLAG 416 608 Vin_n
FLAG 720 272 0
FLAG 704 672 0
FLAG 592 -688 Vp_bias
FLAG 1760 -688 Vp_bias
FLAG 720 -720 Vdd
FLAG 688 -720 Vdd
FLAG 1632 -720 Vdd
FLAG 1664 -720 Vdd
FLAG 1616 -304 Vdd
FLAG 1648 -304 Vdd
FLAG 704 -304 Vdd
FLAG 736 -304 Vdd
FLAG 608 -272 Vn_bias
FLAG 1744 -272 Vn_bias
FLAG 1536 -608 0
FLAG 784 -608 0
FLAG 1552 -496 Vo_p
FLAG 736 -496 Vo_n
FLAG 560 336 Vo_n
FLAG 560 608 Vo_p
DATAFLAG 912 -208 "round($*10k)/10k"
DATAFLAG 1184 -384 "round($*10k)/10k"
DATAFLAG 1200 -208 "round($*10k)/10k"
DATAFLAG 992 -720 "round($*100)/100"
DATAFLAG 1360 -720 "round($*100)/100"
DATAFLAG 1376 -880 "round($*1k)/1k"
DATAFLAG 1520 -496 "round($*1k)/1k"
DATAFLAG 1088 -608 "Id(M1)"
DATAFLAG 2064 -816 ""
DATAFLAG 320 -816 "round($*100)/100"
DATAFLAG 384 -112 "round($*10k)/10k"
DATAFLAG 816 -368 "Id(M11)"
DATAFLAG 960 -832 "-Id(M5)"
DATAFLAG 1104 -112 "round($*10k)/10k"
DATAFLAG 1264 -608 "Id(M1)"
DATAFLAG 832 -496 "round($*1k)/1k"
DATAFLAG 304 -256 "round($*10k)/10k"
DATAFLAG 384 -208 "round($*10k)/10k"
DATAFLAG 1456 -208 "round($*10k)/10k"
SYMBOL nmos4 1040 -480 R0
SYMATTR InstName M1
SYMATTR Value nch
SYMATTR Value2 l={L_input} w={W_input} m={M_input}
SYMBOL nmos4 1136 -336 R0
SYMATTR InstName M3
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL nmos4 1136 -192 R0
SYMATTR InstName M4
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL pmos4 832 -592 M180
SYMATTR InstName M10
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL nmos4 832 -336 R0
SYMATTR InstName M11
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_casc}
SYMBOL nmos4 832 -192 R0
SYMATTR InstName M12
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_casc}
SYMBOL pmos4 832 -736 M180
SYMATTR InstName M5
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL res 2032 -832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1G noiseless
SYMBOL res 2256 -832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1G noiseless
SYMBOL nmos4 256 -192 M0
SYMATTR InstName M13
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL current 208 -496 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value 1.2m
SYMBOL nmos4 256 -336 M0
SYMATTR InstName M14
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL current 16 -496 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 25 75 Left 2
SYMATTR Value 7m
SYMATTR InstName I2
SYMBOL nmos4 64 -192 M0
SYMATTR InstName M15
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL pmos4 256 -736 R180
SYMATTR InstName M16
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL pmos4 256 -592 R180
SYMATTR InstName M17
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL pmos4 64 -704 R180
SYMATTR InstName M18
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc_b}
SYMBOL nmos4 1312 -480 M0
SYMATTR InstName M2
SYMATTR Value nch
SYMATTR Value2 l={L_input} w={W_input} m={M_input}
SYMBOL pmos4 1520 -592 R180
SYMATTR InstName M6
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL nmos4 1520 -336 M0
SYMATTR InstName M7
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_Casc} m={Mn_casc}
SYMBOL nmos4 1520 -192 M0
SYMATTR InstName M8
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_Casc} m={Mn_casc}
SYMBOL pmos4 1520 -736 R180
SYMATTR InstName M9
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL cap 368 -112 R0
SYMATTR InstName C2
SYMATTR Value 1000µ
SYMBOL cap 416 -880 R0
SYMATTR InstName C11
SYMATTR Value 1000µ
SYMBOL CMFB_Amplifier_comp_model 2064 -656 R90
SYMATTR InstName X5
SYMBOL voltage 1952 -736 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 0.9
SYMBOL Overige\ componenten\\voltage -112 -896 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 1.8
SYMBOL cap 336 320 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {Cin}
SYMBOL cap 480 224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value {Cfb}
SYMBOL voltage -112 512 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value {Vcm}
SYMBOL voltage 192 368 M0
WINDOW 3 24 44 Left 2
WINDOW 123 24 72 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 0.005)
SYMATTR Value2 AC 0.5
SYMATTR InstName V4
SYMBOL voltage 192 480 M0
WINDOW 3 24 44 Left 2
WINDOW 123 24 72 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 0.005)
SYMATTR Value2 AC 0.5
SYMATTR InstName V5
SYMBOL res 352 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 100Meg noiseless
SYMBOL res 512 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10G noiseless
SYMBOL res 336 688 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100Meg noiseless
SYMBOL res 496 768 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10G noiseless
SYMBOL cap 704 272 R0
WINDOW 3 -67 30 Left 2
SYMATTR Value {Cload}
SYMATTR InstName C4
SYMBOL cap 688 608 R0
SYMATTR InstName C5
SYMATTR Value {Cload}
SYMBOL cap 320 592 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value {Cin}
SYMBOL cap 480 688 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value {Cfb}
SYMBOL GB-PMOS 704 -256 R0
SYMATTR InstName X3
SYMBOL GB-PMOS 1648 -256 M0
SYMATTR InstName X4
SYMBOL GB-NMOS 1664 -672 M0
SYMATTR InstName X1
SYMBOL GB-NMOS 688 -672 R0
SYMATTR InstName X2
SYMBOL cap 1520 -672 R0
SYMATTR InstName C8
SYMATTR Value {Cc}
SYMBOL cap 768 -672 R0
SYMATTR InstName C9
SYMATTR Value {Cc}
TEXT -608 -1024 Left 2 !.lib 'C:\\Program Files (x86)\\LTC\\LTspiceIV\\lib\\cmp\\log018.l' TT
TEXT -576 -920 Left 2 !;tran 100n
TEXT -576 -960 Left 2 !.lib opamp.sub
TEXT -576 -848 Left 2 !.ac dec 100 100 100G
TEXT 2120 -384 Left 2 !.param Wn_casc=55u Mn_casc=2.5 Ln_casc=0.36u Mn_tail=Mn_casc*2
TEXT 2120 -336 Left 2 !.param Wp_casc=50u Mp_casc=Mn_casc Lp_casc=0.18u
TEXT 2120 -288 Left 2 !.param Wp_casc_top=28u Mp_casc_top = 3*Mn_casc Lp_casc_top = 0.18u
TEXT 2120 -72 Left 2 ;F(x) = 20*log10(abs(V(Vin_p,Vin_n)/1)+1n)
TEXT 3064 -296 Left 2 ;Top PMOS dimensions
TEXT 3064 -344 Left 2 ;PMOS Cascode Dimensions
TEXT 3072 -392 Left 2 ;NMOS Cascode Dimensions - with Main M factor
TEXT 2120 -136 Left 2 !.param Mp_casc_b=Mp_casc*2
TEXT 2120 -184 Left 2 !.param W_input=80u L_input=0.36u M_input=5
TEXT 2128 -440 Left 2 ;Current Control
TEXT 2280 -688 Left 2 ;.NODESET V(x6:N005)=0
TEXT 2280 -640 Left 2 ;.NODESET V(x6:N004)=0
TEXT 2096 32 Left 2 !.param Vcm=0.90 Cload=0.5p
TEXT 2096 72 Left 2 !.param Cin=20p Cfb=Cin/100
TEXT -600 -776 Left 2 !;op
TEXT 2096 120 Left 2 !.param Cc 1.2p
TEXT 2112 200 Left 2 !;noise V(Vo_p,Vo_n) V3 dec 100 100 100G
