Version 4
SHEET 1 5520 2052
WIRE 208 -880 16 -880
WIRE 272 -880 208 -880
WIRE 432 -880 272 -880
WIRE 1040 -880 880 -880
WIRE 1312 -880 1040 -880
WIRE 1376 -880 1312 -880
WIRE 1472 -880 1376 -880
WIRE 208 -832 208 -880
WIRE 208 -832 192 -832
WIRE 880 -832 880 -880
WIRE 896 -832 880 -832
WIRE 1472 -832 1472 -880
WIRE 1472 -832 1456 -832
WIRE 320 -816 256 -816
WIRE 368 -816 320 -816
WIRE 432 -816 368 -816
WIRE 1040 -816 832 -816
WIRE 1184 -816 1040 -816
WIRE 1328 -816 1184 -816
WIRE 1520 -816 1328 -816
WIRE 16 -800 16 -880
WIRE 16 -800 0 -800
WIRE 112 -784 64 -784
WIRE 192 -784 192 -832
WIRE 208 -784 192 -784
WIRE 896 -784 896 -832
WIRE 896 -784 880 -784
WIRE 1456 -784 1456 -832
WIRE 1472 -784 1456 -784
WIRE 0 -752 0 -800
WIRE 16 -752 0 -752
WIRE 880 -720 880 -736
WIRE 880 -720 480 -720
WIRE 992 -720 880 -720
WIRE 1088 -720 992 -720
WIRE 1344 -720 1264 -720
WIRE 1472 -720 1472 -736
WIRE 1472 -720 1344 -720
WIRE 1856 -720 1472 -720
WIRE 208 -704 208 -736
WIRE 272 -704 208 -704
WIRE 416 -704 272 -704
WIRE 448 -704 416 -704
WIRE 208 -688 208 -704
WIRE 208 -688 192 -688
WIRE 880 -688 880 -720
WIRE 896 -688 880 -688
WIRE 1472 -688 1472 -720
WIRE 1472 -688 1456 -688
WIRE 16 -672 16 -704
WIRE 64 -672 16 -672
WIRE 112 -672 112 -784
WIRE 112 -672 64 -672
WIRE 256 -672 112 -672
WIRE 304 -672 256 -672
WIRE 800 -672 784 -672
WIRE 816 -672 800 -672
WIRE 832 -672 816 -672
WIRE 1536 -672 1520 -672
WIRE 1552 -672 1536 -672
WIRE 1568 -672 1552 -672
WIRE 448 -656 448 -704
WIRE 560 -656 448 -656
WIRE 592 -656 560 -656
WIRE 192 -640 192 -688
WIRE 208 -640 192 -640
WIRE 784 -640 784 -672
WIRE 896 -640 896 -688
WIRE 896 -640 880 -640
WIRE 1456 -640 1456 -688
WIRE 1472 -640 1456 -640
WIRE 1568 -640 1568 -672
WIRE 480 -624 480 -720
WIRE 592 -624 480 -624
WIRE 1856 -624 1856 -720
WIRE 1856 -624 1760 -624
WIRE 1088 -592 1088 -720
WIRE 208 -560 208 -592
WIRE 368 -560 368 -816
WIRE 368 -560 208 -560
WIRE 1760 -528 1744 -528
WIRE 1808 -528 1760 -528
WIRE 1936 -528 1888 -528
WIRE 1968 -528 1936 -528
WIRE 2032 -528 1968 -528
WIRE 2144 -528 2112 -528
WIRE 2160 -528 2144 -528
WIRE 16 -496 16 -672
WIRE 208 -496 208 -560
WIRE 832 -496 784 -496
WIRE 880 -496 880 -592
WIRE 880 -496 832 -496
WIRE 1472 -496 1472 -592
WIRE 1520 -496 1472 -496
WIRE 1552 -496 1520 -496
WIRE 1088 -480 1088 -592
WIRE 1264 -480 1264 -720
WIRE 1104 -432 1088 -432
WIRE 1264 -432 1248 -432
WIRE 1904 -432 1824 -432
WIRE 1968 -432 1968 -528
WIRE 1040 -400 1008 -400
WIRE 1344 -400 1312 -400
WIRE 208 -384 208 -416
WIRE 288 -384 208 -384
WIRE 1104 -384 1104 -432
WIRE 1104 -384 1088 -384
WIRE 1184 -384 1104 -384
WIRE 1248 -384 1248 -432
WIRE 1248 -384 1184 -384
WIRE 1264 -384 1248 -384
WIRE 208 -336 208 -384
WIRE 880 -336 880 -496
WIRE 1184 -336 1184 -384
WIRE 1472 -336 1472 -496
WIRE 208 -288 192 -288
WIRE 896 -288 880 -288
WIRE 1200 -288 1184 -288
WIRE 1472 -288 1456 -288
WIRE 592 -272 496 -272
WIRE 16 -256 16 -416
WIRE 80 -256 16 -256
WIRE 96 -256 80 -256
WIRE 256 -256 96 -256
WIRE 336 -256 256 -256
WIRE 800 -256 784 -256
WIRE 832 -256 800 -256
WIRE 1568 -256 1520 -256
WIRE 192 -240 192 -288
WIRE 208 -240 192 -240
WIRE 592 -240 528 -240
WIRE 896 -240 896 -288
WIRE 896 -240 880 -240
WIRE 1200 -240 1200 -288
WIRE 1200 -240 1184 -240
WIRE 1456 -240 1456 -288
WIRE 1472 -240 1456 -240
WIRE 832 -224 832 -256
WIRE 832 -224 816 -224
WIRE 1520 -224 1520 -256
WIRE 1536 -224 1520 -224
WIRE 208 -208 208 -240
WIRE 256 -208 208 -208
WIRE 384 -208 256 -208
WIRE 448 -208 384 -208
WIRE 496 -208 496 -272
WIRE 496 -208 448 -208
WIRE 880 -208 880 -240
WIRE 880 -208 784 -208
WIRE 912 -208 880 -208
WIRE 1184 -208 1184 -240
WIRE 1200 -208 1184 -208
WIRE 1472 -208 1472 -240
WIRE 1472 -208 1456 -208
WIRE 1568 -208 1472 -208
WIRE 16 -192 16 -256
WIRE 208 -192 208 -208
WIRE 880 -192 880 -208
WIRE 1184 -192 1184 -208
WIRE 1472 -192 1472 -208
WIRE 1568 -192 1568 -208
WIRE 1760 -192 1760 -240
WIRE 1760 -192 1568 -192
WIRE 528 -176 528 -240
WIRE 784 -176 784 -208
WIRE 784 -176 528 -176
WIRE 16 -144 0 -144
WIRE 208 -144 192 -144
WIRE 896 -144 880 -144
WIRE 1200 -144 1184 -144
WIRE 1472 -144 1456 -144
WIRE 80 -112 80 -256
WIRE 80 -112 64 -112
WIRE 288 -112 288 -384
WIRE 288 -112 256 -112
WIRE 384 -112 288 -112
WIRE 784 -112 384 -112
WIRE 832 -112 784 -112
WIRE 1104 -112 832 -112
WIRE 1136 -112 1104 -112
WIRE 1520 -112 1136 -112
WIRE 0 -96 0 -144
WIRE 16 -96 0 -96
WIRE 192 -96 192 -144
WIRE 208 -96 192 -96
WIRE 896 -96 896 -144
WIRE 896 -96 880 -96
WIRE 1200 -96 1200 -144
WIRE 1200 -96 1184 -96
WIRE 1456 -96 1456 -144
WIRE 1472 -96 1456 -96
WIRE 16 -48 16 -96
WIRE 208 -48 208 -96
WIRE 208 -48 16 -48
WIRE 384 -48 208 -48
WIRE 880 -48 880 -96
WIRE 880 -48 384 -48
WIRE 1184 -48 1184 -96
WIRE 1184 -48 880 -48
WIRE 1472 -48 1472 -96
WIRE 1472 -48 1184 -48
WIRE 1184 0 1184 -48
FLAG 1184 0 0
FLAG 1472 -880 Vdd_amp
FLAG 1184 -816 V_cm_fb
FLAG 1008 -400 Vin_p
FLAG 1344 -400 Vin_n
FLAG 784 -496 Vo_n
FLAG 2144 -528 Vo_p
FLAG 1760 -528 Vo_n
FLAG 784 -112 Vb_NMOS
FLAG 256 -208 Vn_bias
FLAG 336 -256 Vn_bias_casc
FLAG 1136 -256 Vn_bias_casc
FLAG 272 -704 Vp_bias
FLAG 1552 -496 Vo_p
FLAG 272 -880 Vdd_bias
FLAG 1824 -352 0
FLAG 1936 -288 V_cm_fb
FLAG 2000 -368 Vdd_amp
FLAG 2000 -336 Vdd_bias
FLAG 1312 -880 Vdd
FLAG 304 -672 Vp_bias_casc
FLAG 1760 -656 Vp_bias
FLAG 1760 -272 Vn_bias
FLAG 800 -608 0
FLAG 1536 -608 0
FLAG 416 -768 0
FLAG 448 -144 0
FLAG 1568 -320 0
FLAG 800 -320 0
FLAG 720 -688 Vdd_bias
FLAG 688 -688 Vdd_amp
FLAG 720 -304 Vdd_bias
FLAG 688 -304 Vdd_amp
FLAG 1632 -304 Vdd_bias
FLAG 1664 -304 Vdd_amp
FLAG 1632 -688 Vdd_bias
FLAG 1664 -688 Vdd_amp
DATAFLAG 912 -208 "round($*10k)/10k"
DATAFLAG 1184 -384 "round($*10k)/10k"
DATAFLAG 1200 -208 "round($*10k)/10k"
DATAFLAG 992 -720 "round($*1k)/1k"
DATAFLAG 1376 -880 "round($*1k)/1k"
DATAFLAG 1520 -496 "round($*1k)/1k"
DATAFLAG 1936 -528 ""
DATAFLAG 320 -816 "round($*100)/100"
DATAFLAG 64 -672 "round($*10k)/10k"
DATAFLAG 384 -112 "round($*10k)/10k"
DATAFLAG 1104 -112 "round($*10k)/10k"
DATAFLAG 1088 -592 "round(Id(x7:M1)*10k)/10k"
DATAFLAG 832 -496 "round($*1k)/1k"
DATAFLAG 96 -256 "round($*10k)/10k"
DATAFLAG 816 -224 "round($*100)/100"
DATAFLAG 1536 -224 "round($*100)/100"
DATAFLAG 384 -208 "round($*10k)/10k"
DATAFLAG 560 -656 "round($*100)/100"
DATAFLAG 1456 -208 "round($*100k)/100k"
DATAFLAG 1552 -672 "round($*100)/100"
DATAFLAG 1344 -720 "round($*1k)/1k"
DATAFLAG 928 -496 "round(Id(x7:M1)*100k)/100k"
DATAFLAG 1328 -816 "round($*1k)/1k"
DATAFLAG 816 -672 "round($*100)/100"
SYMBOL nmos4 1040 -480 R0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M1
SYMATTR Value nch
SYMATTR Value2 l={L_input} w={W_input} m={M_input}
SYMBOL nmos4 1136 -336 R0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M3
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL nmos4 1136 -192 R0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M4
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL pmos4 832 -592 M180
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M10
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL nmos4 832 -336 R0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M11
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_casc}
SYMBOL nmos4 832 -192 R0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M12
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_casc}
SYMBOL pmos4 832 -736 M180
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M5
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL res 1904 -544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10G noiseless
SYMBOL res 2128 -544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10G noiseless
SYMBOL nmos4 256 -192 M0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M13
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL nmos4 256 -336 M0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M14
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL current 16 -496 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 25 75 Left 2
SYMATTR Value 25.65m
SYMATTR InstName I2
SYMBOL nmos4 64 -192 M0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M15
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL pmos4 256 -736 R180
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M16
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL pmos4 256 -592 R180
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M17
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL nmos4 1312 -480 M0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M2
SYMATTR Value nch
SYMATTR Value2 l={L_input} w={W_input} m={M_input}
SYMBOL pmos4 1520 -592 R180
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M6
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL nmos4 1520 -336 M0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M7
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_Casc} m={Mn_casc}
SYMBOL nmos4 1520 -192 M0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M8
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_Casc} m={Mn_casc}
SYMBOL pmos4 1520 -736 R180
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M9
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL cap 368 -112 R0
WINDOW 0 24 8 Invisible 2
SYMATTR InstName C2
SYMATTR Value 1m
SYMBOL cap 416 -880 R0
SYMATTR InstName C11
SYMATTR Value 1m
SYMBOL cap 1024 -880 R0
WINDOW 0 24 8 Invisible 2
WINDOW 3 40 37 Left 2
SYMATTR InstName C1
SYMATTR Value 1m
SYMBOL CMFB_Amplifier_comp_model 1936 -368 R90
SYMATTR InstName X5
SYMBOL voltage 1824 -448 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 0.9
SYMBOL pmos4 64 -704 R180
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M18
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL current 208 -496 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 25 75 Left 2
SYMATTR Value 3.6m
SYMATTR InstName I1
SYMBOL cap 1520 -672 R0
WINDOW 0 24 8 Invisible 2
WINDOW 3 47 76 Left 2
SYMATTR InstName C3
SYMATTR Value 5p
SYMBOL cap 784 -672 R0
WINDOW 0 24 8 Invisible 2
WINDOW 3 -36 73 Left 2
SYMATTR InstName C4
SYMATTR Value 5p
SYMBOL cap 400 -768 R0
WINDOW 0 24 8 Invisible 2
SYMATTR InstName C5
SYMATTR Value 1m
SYMBOL cap 432 -208 R0
WINDOW 0 24 8 Invisible 2
SYMATTR InstName C6
SYMATTR Value 1m
SYMBOL cap 1552 -320 R0
WINDOW 0 24 8 Invisible 2
WINDOW 3 -33 -11 Left 2
SYMATTR InstName C7
SYMATTR Value 3p
SYMBOL cap 784 -320 R0
WINDOW 0 24 8 Invisible 2
WINDOW 3 -31 17 Left 2
SYMATTR InstName C8
SYMATTR Value 3p
SYMBOL GB-NMOS_100x 688 -640 R0
SYMATTR InstName X6
SYMBOL GB-NMOS_100x 1664 -640 M0
SYMATTR InstName X7
SYMBOL GB-PMOS_100x 688 -256 R0
SYMATTR InstName X8
SYMBOL GB-PMOS_100x 1664 -256 M0
SYMATTR InstName X9
TEXT -8 128 Left 2 !.lib 'C:\\Program Files (x86)\\LTC\\LTspiceIV\\lib\\cmp\\log018.l' TT
TEXT -16 176 Left 2 !.lib opamp.sub
TEXT 0 304 Left 2 !.param Wn_casc=84.5u Mn_casc=M_size Ln_casc=0.72u Mn_tail=3.4*Mn_casc
TEXT 0 352 Left 2 !.param Wp_casc=78u Mp_casc=1.67*M_size Lp_casc=0.43u
TEXT 0 400 Left 2 !.param Wp_casc_top=56u Mp_casc_top=3.8*M_size Lp_casc_top=0.43u
TEXT 0 616 Left 2 ;F(x) = 20*log10(abs(V(Vin_p,Vin_n)/1)+1n)
TEXT 944 392 Left 2 ;Top PMOS dimensions
TEXT 944 344 Left 2 ;PMOS Cascode Dimensions
TEXT 952 296 Left 2 ;NMOS Cascode Dimensions - with Main M factor
TEXT 0 552 Left 2 !.param Mp_casc_b=Mp_casc*2
TEXT 0 504 Left 2 !.param W_input=80u L_input=0.72u M_input=M_size
TEXT 8 248 Left 2 ;Current Control
TEXT -16 696 Left 2 !.param M_size=9 I_main=0.4m*M_size I_casc=2.85m*M_size
TEXT 736 104 Left 2 !.param Cc_n=5p Cc_p=3p
