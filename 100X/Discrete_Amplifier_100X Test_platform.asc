Version 4
SHEET 1 5520 2052
WIRE 2368 -1264 2352 -1264
WIRE 2416 -1264 2368 -1264
WIRE 2560 -1264 2496 -1264
WIRE 2640 -1264 2560 -1264
WIRE 2752 -1264 2720 -1264
WIRE 2768 -1264 2752 -1264
WIRE 2496 -1216 2384 -1216
WIRE 2496 -1200 2496 -1216
WIRE 2560 -1200 2560 -1264
WIRE 2384 -1168 2384 -1216
WIRE 2528 -1024 2528 -1056
WIRE 208 -880 16 -880
WIRE 352 -880 208 -880
WIRE 432 -880 352 -880
WIRE 512 -880 432 -880
WIRE 1104 -880 1056 -880
WIRE 1296 -880 1104 -880
WIRE 1488 -880 1296 -880
WIRE 1648 -880 1488 -880
WIRE 1984 -864 1952 -864
WIRE 2016 -864 1984 -864
WIRE 2128 -864 2096 -864
WIRE 2160 -864 2128 -864
WIRE 208 -832 208 -880
WIRE 1056 -832 1056 -880
WIRE 1648 -832 1648 -880
WIRE 1984 -832 1984 -864
WIRE 2128 -832 2128 -864
WIRE 368 -816 256 -816
WIRE 432 -816 368 -816
WIRE 1392 -816 1008 -816
WIRE 1488 -816 1392 -816
WIRE 1696 -816 1488 -816
WIRE 16 -800 16 -880
WIRE 112 -784 64 -784
WIRE 1056 -720 1056 -736
WIRE 1056 -720 992 -720
WIRE 1264 -720 1056 -720
WIRE 1648 -720 1648 -736
WIRE 1648 -720 1440 -720
WIRE 1728 -720 1648 -720
WIRE 208 -704 208 -736
WIRE 256 -704 208 -704
WIRE 272 -704 256 -704
WIRE 208 -688 208 -704
WIRE 1056 -688 1056 -720
WIRE 1648 -688 1648 -720
WIRE 16 -672 16 -704
WIRE 112 -672 112 -784
WIRE 112 -672 16 -672
WIRE 256 -672 112 -672
WIRE 448 -672 256 -672
WIRE 464 -672 448 -672
WIRE 1008 -672 960 -672
WIRE 1712 -672 1696 -672
WIRE 1920 -656 1904 -656
WIRE 768 -608 768 -656
WIRE 992 -608 992 -720
WIRE 992 -608 768 -608
WIRE 1728 -608 1728 -720
WIRE 1920 -608 1920 -656
WIRE 1920 -608 1728 -608
WIRE 208 -560 208 -592
WIRE 368 -560 368 -816
WIRE 368 -560 208 -560
WIRE 16 -496 16 -672
WIRE 208 -496 208 -560
WIRE 976 -496 960 -496
WIRE 1056 -496 1056 -592
WIRE 1056 -496 976 -496
WIRE 1648 -496 1648 -592
WIRE 1744 -496 1648 -496
WIRE 1760 -496 1744 -496
WIRE 1264 -480 1264 -720
WIRE 1440 -480 1440 -720
WIRE 1216 -400 1184 -400
WIRE 1520 -400 1488 -400
WIRE 208 -384 208 -416
WIRE 288 -384 208 -384
WIRE 1360 -384 1264 -384
WIRE 1440 -384 1360 -384
WIRE 1056 -368 1056 -496
WIRE 1648 -368 1648 -496
WIRE 208 -336 208 -384
WIRE 1360 -336 1360 -384
WIRE 976 -288 960 -288
WIRE 1008 -288 976 -288
WIRE 1728 -288 1696 -288
WIRE 784 -272 736 -272
WIRE 1936 -272 1920 -272
WIRE 16 -256 16 -416
WIRE 80 -256 16 -256
WIRE 256 -256 80 -256
WIRE 336 -256 256 -256
WIRE 1056 -240 1056 -272
WIRE 1056 -240 944 -240
WIRE 208 -208 208 -240
WIRE 256 -208 208 -208
WIRE 384 -208 256 -208
WIRE 1056 -208 1056 -240
WIRE 1088 -208 1056 -208
WIRE 1360 -208 1360 -240
WIRE 1408 -208 1360 -208
WIRE 1648 -208 1648 -272
WIRE 1936 -208 1936 -272
WIRE 1936 -208 1648 -208
WIRE 16 -192 16 -256
WIRE 208 -192 208 -208
WIRE 1056 -192 1056 -208
WIRE 1360 -192 1360 -208
WIRE 1648 -192 1648 -208
WIRE 736 -176 736 -272
WIRE 944 -176 944 -240
WIRE 944 -176 736 -176
WIRE 80 -112 80 -256
WIRE 80 -112 64 -112
WIRE 288 -112 288 -384
WIRE 288 -112 256 -112
WIRE 384 -112 288 -112
WIRE 1008 -112 384 -112
WIRE 1312 -112 1008 -112
WIRE 1696 -112 1312 -112
WIRE 16 -48 16 -96
WIRE 208 -48 208 -96
WIRE 208 -48 16 -48
WIRE 384 -48 208 -48
WIRE 1056 -48 1056 -96
WIRE 1056 -48 384 -48
WIRE 1360 -48 1360 -96
WIRE 1360 -48 1056 -48
WIRE 1648 -48 1648 -96
WIRE 1648 -48 1360 -48
WIRE 1360 0 1360 -48
WIRE 736 128 688 128
WIRE 864 128 816 128
WIRE 576 208 544 208
WIRE 688 208 688 128
WIRE 688 208 656 208
WIRE 736 208 688 208
WIRE 864 208 864 128
WIRE 864 208 800 208
WIRE 544 304 544 208
WIRE 560 304 544 304
WIRE 592 304 560 304
WIRE 688 304 688 208
WIRE 688 304 656 304
WIRE 768 304 688 304
WIRE 864 304 864 208
WIRE 1056 304 864 304
WIRE 368 464 208 464
WIRE 512 464 512 384
WIRE 512 464 368 464
WIRE 208 496 208 464
WIRE 512 560 512 544
WIRE 560 560 544 560
WIRE 576 560 560 560
WIRE 688 560 640 560
WIRE 736 560 688 560
WIRE 1040 560 864 560
WIRE 544 656 544 560
WIRE 560 656 544 656
WIRE 688 656 688 560
WIRE 688 656 640 656
WIRE 736 656 688 656
WIRE 864 656 864 560
WIRE 864 656 800 656
WIRE 688 736 688 656
WIRE 720 736 688 736
WIRE 864 736 864 656
WIRE 864 736 800 736
FLAG 1264 -432 0
FLAG 1360 -288 0
FLAG 1360 -144 0
FLAG 1360 0 0
FLAG 1056 -320 0
FLAG 1056 -144 0
FLAG 1984 -752 0
FLAG 1984 -864 Vdd_amp
FLAG 1056 -640 Vdd
FLAG 1056 -784 Vdd
FLAG 208 -144 0
FLAG 16 -144 0
FLAG 208 -288 0
FLAG 208 -784 Vdd
FLAG 208 -640 Vdd
FLAG 16 -752 Vdd
FLAG 1440 -432 0
FLAG 1648 -320 0
FLAG 1648 -144 0
FLAG 352 -880 Vdd_bias
FLAG 1648 -640 Vdd
FLAG 1648 -784 Vdd
FLAG 1392 -816 V_cm_fb
FLAG 1184 -400 Vin_p
FLAG 1520 -400 Vin_n
FLAG 208 576 0
FLAG 976 -496 Vo_n
FLAG 1744 -496 Vo_p
FLAG 2752 -1264 Vo_p
FLAG 2368 -1264 Vo_n
FLAG 960 -432 0
FLAG 1056 304 Vo_n
FLAG 1040 560 Vo_p
FLAG 256 -208 Vn_bias
FLAG 336 -256 Vn_bias_casc
FLAG 1312 -256 Vn_bias_casc
FLAG 256 -704 Vp_bias
FLAG 368 464 V_cm
FLAG 2528 -1024 V_cm_fb
FLAG 2128 -752 0
FLAG 2128 -864 Vdd_bias
FLAG 2592 -1104 Vdd_bias
FLAG 2592 -1136 Vdd_amp
FLAG 1104 -880 Vdd_amp
FLAG 2384 -1088 0
FLAG 1296 -880 Vdd
FLAG 1808 -720 Vdd_amp
FLAG 1776 -720 Vdd_bias
FLAG 1904 -688 Vp_bias
FLAG 448 -672 Vp_casc_bias
FLAG 768 -688 Vp_bias
FLAG 864 -720 Vdd_amp
FLAG 896 -720 Vdd_bias
FLAG 1760 -432 0
FLAG 912 -336 Vdd_bias
FLAG 880 -336 Vdd_amp
FLAG 1792 -336 Vdd_bias
FLAG 1824 -336 Vdd_amp
FLAG 784 -304 Vn_bias
FLAG 1920 -304 Vn_bias
FLAG 512 304 Vin_p
FLAG 512 560 Vin_n
FLAG 560 304 0
FLAG 560 560 0
DATAFLAG 1360 -384 "round($*10k)/10k"
DATAFLAG 1408 -208 "round($*10k)/10k"
DATAFLAG 1168 -720 "round($*100)/100"
DATAFLAG 1536 -720 "round($*100)/100"
DATAFLAG 1552 -880 "round($*1k)/1k"
DATAFLAG 1648 -560 "round($*1k)/1k"
DATAFLAG 1264 -608 "Id(M1)"
DATAFLAG 2544 -1264 ""
DATAFLAG 320 -816 "round($*100)/100"
DATAFLAG 320 -672 "round($*10k)/10k"
DATAFLAG 384 -112 "round($*10k)/10k"
DATAFLAG 1136 -832 "-Id(M5)"
DATAFLAG 1280 -208 "Id(M4)"
DATAFLAG 1280 -112 "round($*10k)/10k"
DATAFLAG 384 -208 "round($*10k)/10k"
DATAFLAG 208 -704 "round($*10k)/10k"
DATAFLAG 1440 -608 "Id(M1)"
DATAFLAG 1056 -560 "round($*1k)/1k"
DATAFLAG 1264 -816 ""
DATAFLAG 320 -256 "round($*10k)/10k"
DATAFLAG 1648 -208 "round($*10k)/10k"
DATAFLAG 1088 -208 "round($*10k)/10k"
DATAFLAG 992 -288 ""
DATAFLAG 976 -672 "round($*1k)/1k"
DATAFLAG 1712 -672 "round($*1k)/1k"
SYMBOL nmos4 1216 -480 R0
SYMATTR InstName M1
SYMATTR Value nch
SYMATTR Value2 l={L_input} w={W_input} m={M_input}
SYMBOL nmos4 1312 -336 R0
SYMATTR InstName M3
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL nmos4 1312 -192 R0
SYMATTR InstName M4
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL pmos4 1008 -592 M180
SYMATTR InstName M10
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL nmos4 1008 -368 R0
SYMATTR InstName M11
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_casc}
SYMBOL nmos4 1008 -192 R0
SYMATTR InstName M12
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_casc}
SYMBOL voltage 1984 -848 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 1.8
SYMBOL pmos4 1008 -736 M180
SYMATTR InstName M5
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL res 2512 -1280 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1G noiseless
SYMBOL res 2736 -1280 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1G noiseless
SYMBOL nmos4 256 -192 M0
SYMATTR InstName M13
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL current 208 -496 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value 4.8m
SYMBOL nmos4 256 -336 M0
SYMATTR InstName M14
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL current 16 -496 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 25 75 Left 2
SYMATTR Value 25m
SYMATTR InstName I2
SYMBOL nmos4 64 -192 M0
SYMATTR InstName M15
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL pmos4 256 -736 R180
SYMATTR InstName M16
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL pmos4 256 -592 R180
SYMATTR InstName M17
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL pmos4 64 -704 R180
SYMATTR InstName M18
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc_b}
SYMBOL nmos4 1488 -480 M0
SYMATTR InstName M2
SYMATTR Value nch
SYMATTR Value2 l={L_input} w={W_input} m={M_input}
SYMBOL pmos4 1696 -592 R180
SYMATTR InstName M6
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL nmos4 1696 -368 M0
SYMATTR InstName M7
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_Casc} m={Mn_casc}
SYMBOL nmos4 1696 -192 M0
SYMATTR InstName M8
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_Casc} m={Mn_casc}
SYMBOL pmos4 1696 -736 R180
SYMATTR InstName M9
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL cap 368 -112 R0
SYMATTR InstName C2
SYMATTR Value 1000µ
SYMBOL cap 656 288 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 80p
SYMBOL cap 800 192 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 0.8p
SYMBOL cap 640 576 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C6
SYMATTR Value 80p
SYMBOL cap 800 672 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C7
SYMATTR Value 0.8p
SYMBOL voltage 208 480 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value {Vcm}
SYMBOL voltage 512 288 M0
WINDOW 3 24 44 Left 2
WINDOW 123 24 72 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 0.5)
SYMATTR Value2 AC 0.5
SYMATTR InstName V4
SYMBOL voltage 512 448 M0
WINDOW 3 24 44 Left 2
WINDOW 123 24 72 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 0.5)
SYMATTR Value2 AC 0.5
SYMATTR InstName V5
SYMBOL res 672 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 100Meg noiseless
SYMBOL res 832 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100Meg noiseless
SYMBOL res 656 640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100Meg noiseless
SYMBOL res 816 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 100Meg noiseless
SYMBOL cap 944 -496 R0
SYMATTR InstName C1
SYMATTR Value {Cload}
SYMBOL cap 1776 -496 M0
SYMATTR InstName C9
SYMATTR Value {Cload}
SYMBOL cap 416 -880 R0
SYMATTR InstName C11
SYMATTR Value 1000µ
SYMBOL CMFB_Amplifier_comp_model 2528 -1136 R90
SYMATTR InstName X1
SYMBOL voltage 2128 -848 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 1.8
SYMBOL voltage 2384 -1184 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value 0.9
SYMBOL cap 1472 -880 R0
SYMATTR InstName C5
SYMATTR Value 1000µ
SYMBOL GB-NMOS 1808 -672 M0
SYMATTR InstName X2
SYMBOL GB-NMOS 864 -672 R0
SYMATTR InstName X3
SYMBOL GB-PMOS 1824 -288 M0
SYMATTR InstName X4
SYMBOL GB-PMOS 880 -288 R0
SYMATTR InstName X5
TEXT -608 -1024 Left 2 !.lib 'C:\\Program Files (x86)\\LTC\\LTspiceIV\\lib\\cmp\\log018.l' TT
TEXT -576 -960 Left 2 !.lib opamp.sub
TEXT 2264 -64 Left 2 !.param Wn_casc=86u Mn_casc=4*N_Mfact Ln_casc=0.18u*Mn_casc Mn_tail=Mn_casc*2
TEXT 2264 -16 Left 2 !.param Wp_casc=41u Mp_casc=31*N_Mfact Lp_casc=0.18u*N_Mfact
TEXT 2264 32 Left 2 !.param Wp_casc_top=53u Mp_casc_top=12*N_Mfact Lp_casc_top=0.18u*N_Mfact
TEXT 2264 80 Left 2 !.param Vcm=0.90 Cload=2.2p
TEXT 2240 392 Left 2 ;F(x) = 20*log10(abs(V(Vin_p,Vin_n)/1)+1n)
TEXT 3296 72 Left 2 ;Top PMOS dimensions
TEXT 3296 24 Left 2 ;PMOS Cascode Dimensions
TEXT 3360 -72 Left 2 ;NMOS Cascode Dimensions - with Main M factor
TEXT 2264 184 Left 2 !.param Mp_casc_b=Mp_casc*2
TEXT -592 240 Left 2 ;For open loop, short the left side of input capacitance. (Since Ideal Source)
TEXT 2264 136 Left 2 !.param W_input=43u L_input=0.18u M_input=4
TEXT 2248 464 Left 2 !;noise V(Vo_p,Vo_n) V2 dec 100 100 100G
TEXT 2240 -216 Left 2 !.param N_Mfact=2
TEXT 2240 -176 Left 2 ;Current Control
TEXT 2256 -648 Left 2 !.param Wn_CMFB_tail = 20.2u, Ln_CMFB_tail=0.36u*Mn_CMFB_tail, Mn_CMFB_tail=3
TEXT 2408 -536 Left 2 !.param Wp_CMFB = 66.2u, Lp_CMFB =0.36u*Mp_CMFB , Mp_CMFB = Mn_CMFB_tail
TEXT 2248 -592 Left 2 !.param W_CMFB_in = 17.9u, L_CMFB_in =0.36u*M_CMFB_in , M_CMFB_in = Mn_CMFB_tail
TEXT 2304 -328 Left 2 !.options gmin=1e-12 abstol=1e-12 reltol=0.001
TEXT 2304 -288 Left 2 !.options srcsteps= 100
TEXT 2280 -448 Left 2 !;tran 0 100ns 0 10p
TEXT 2288 -408 Left 2 !;op
TEXT -608 792 Left 2 !;tran 0 100ns 0 10p
TEXT 2304 -360 Left 2 !.ac dec 100 100 100G
TEXT 2264 240 Left 2 !.param CS_Bias=10u
TEXT 2256 304 Left 2 ;.step param Cc 0 1p 0.1p
TEXT 2264 344 Left 2 !.param Cc 100f
