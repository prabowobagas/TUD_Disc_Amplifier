Version 4
SHEET 1 5520 2052
WIRE 208 -880 16 -880
WIRE 432 -880 208 -880
WIRE 880 -880 432 -880
WIRE 1376 -880 880 -880
WIRE 1472 -880 1376 -880
WIRE 208 -832 208 -880
WIRE 880 -832 880 -880
WIRE 1472 -832 1472 -880
WIRE 320 -816 256 -816
WIRE 368 -816 320 -816
WIRE 432 -816 368 -816
WIRE 832 -816 432 -816
WIRE 1520 -816 832 -816
WIRE 1888 -816 1872 -816
WIRE 1936 -816 1888 -816
WIRE 2064 -816 2016 -816
WIRE 2080 -816 2064 -816
WIRE 2160 -816 2080 -816
WIRE 2272 -816 2240 -816
WIRE 2288 -816 2272 -816
WIRE 16 -800 16 -880
WIRE 112 -784 64 -784
WIRE 2080 -752 2080 -816
WIRE 880 -720 880 -736
WIRE 880 -720 480 -720
WIRE 992 -720 880 -720
WIRE 1088 -720 992 -720
WIRE 1360 -720 1264 -720
WIRE 1472 -720 1472 -736
WIRE 1472 -720 1360 -720
WIRE 1840 -720 1472 -720
WIRE 208 -704 208 -736
WIRE 272 -704 208 -704
WIRE 208 -688 208 -704
WIRE 880 -688 880 -720
WIRE 1472 -688 1472 -720
WIRE 16 -672 16 -704
WIRE 112 -672 112 -784
WIRE 112 -672 16 -672
WIRE 256 -672 112 -672
WIRE 304 -672 256 -672
WIRE 816 -672 784 -672
WIRE 832 -672 816 -672
WIRE 1744 -656 1712 -656
WIRE 784 -640 784 -672
WIRE 1520 -640 1520 -672
WIRE 480 -624 480 -720
WIRE 592 -624 480 -624
WIRE 1840 -624 1840 -720
WIRE 1840 -624 1712 -624
WIRE 2256 -624 2256 -656
WIRE 1088 -608 1088 -720
WIRE 1264 -608 1264 -720
WIRE 208 -560 208 -592
WIRE 368 -560 368 -816
WIRE 368 -560 208 -560
WIRE 1472 -560 1472 -592
WIRE 16 -496 16 -672
WIRE 208 -496 208 -560
WIRE 752 -496 736 -496
WIRE 832 -496 752 -496
WIRE 880 -496 880 -592
WIRE 880 -496 832 -496
WIRE 1472 -496 1472 -560
WIRE 1552 -496 1472 -496
WIRE 1568 -496 1552 -496
WIRE 1088 -480 1088 -608
WIRE 1264 -480 1264 -608
WIRE 1040 -400 1008 -400
WIRE 1344 -400 1312 -400
WIRE 208 -384 208 -416
WIRE 288 -384 208 -384
WIRE 1184 -384 1088 -384
WIRE 1264 -384 1184 -384
WIRE 208 -336 208 -384
WIRE 880 -336 880 -496
WIRE 1184 -336 1184 -384
WIRE 1472 -336 1472 -496
WIRE 16 -256 16 -416
WIRE 80 -256 16 -256
WIRE 256 -256 80 -256
WIRE 336 -256 256 -256
WIRE 832 -256 800 -256
WIRE 1600 -256 1520 -256
WIRE 752 -240 688 -240
WIRE 208 -208 208 -240
WIRE 256 -208 208 -208
WIRE 384 -208 256 -208
WIRE 688 -208 688 -240
WIRE 688 -208 384 -208
WIRE 880 -208 880 -240
WIRE 880 -208 752 -208
WIRE 912 -208 880 -208
WIRE 1184 -208 1184 -240
WIRE 1232 -208 1184 -208
WIRE 1472 -208 1472 -240
WIRE 1472 -208 1440 -208
WIRE 1552 -208 1472 -208
WIRE 16 -192 16 -256
WIRE 208 -192 208 -208
WIRE 752 -192 752 -208
WIRE 880 -192 880 -208
WIRE 1184 -192 1184 -208
WIRE 1472 -192 1472 -208
WIRE 1664 -192 1648 -192
WIRE 1552 -144 1552 -208
WIRE 1664 -144 1664 -192
WIRE 1664 -144 1552 -144
WIRE 80 -112 80 -256
WIRE 80 -112 64 -112
WIRE 288 -112 288 -384
WIRE 288 -112 256 -112
WIRE 384 -112 288 -112
WIRE 784 -112 384 -112
WIRE 832 -112 784 -112
WIRE 1104 -112 1072 -112
WIRE 1136 -112 1104 -112
WIRE 16 -48 16 -96
WIRE 208 -48 208 -96
WIRE 208 -48 16 -48
WIRE 384 -48 208 -48
WIRE 880 -48 880 -96
WIRE 880 -48 384 -48
WIRE 1104 -48 880 -48
WIRE 1184 -48 1184 -96
WIRE 1184 -48 1104 -48
WIRE 1472 -48 1472 -96
WIRE 1472 -48 1184 -48
WIRE 1184 0 1184 -48
WIRE 736 128 688 128
WIRE 864 128 816 128
WIRE 576 208 544 208
WIRE 688 208 688 128
WIRE 688 208 656 208
WIRE 736 208 688 208
WIRE 864 208 864 128
WIRE 864 208 800 208
WIRE 544 304 544 208
WIRE 576 304 544 304
WIRE 688 304 688 208
WIRE 688 304 640 304
WIRE 768 304 688 304
WIRE 864 304 864 208
WIRE 1056 304 864 304
WIRE 544 320 544 304
WIRE 1392 384 1376 384
WIRE 512 464 512 384
WIRE 512 464 208 464
WIRE 1392 480 1376 480
WIRE 208 496 208 464
WIRE 512 560 512 544
WIRE 544 560 544 544
WIRE 576 560 544 560
WIRE 688 560 640 560
WIRE 736 560 688 560
WIRE 1040 560 864 560
WIRE 544 656 544 560
WIRE 560 656 544 656
WIRE 688 656 688 560
WIRE 688 656 640 656
WIRE 736 656 688 656
WIRE 864 656 864 560
WIRE 864 656 800 656
WIRE 688 736 688 656
WIRE 720 736 688 736
WIRE 864 736 864 656
WIRE 864 736 800 736
FLAG 1088 -432 0
FLAG 1184 -288 0
FLAG 1184 -144 0
FLAG 1184 0 0
FLAG 880 -288 0
FLAG 880 -144 0
FLAG 2256 -544 0
FLAG 2256 -656 Vdd
FLAG 880 -880 Vdd
FLAG 880 -640 Vdd
FLAG 880 -784 Vdd
FLAG 208 -144 0
FLAG 16 -144 0
FLAG 208 -288 0
FLAG 208 -784 Vdd
FLAG 208 -640 Vdd
FLAG 16 -752 Vdd
FLAG 1264 -432 0
FLAG 1472 -288 0
FLAG 1472 -144 0
FLAG 1472 -880 Vdd
FLAG 1472 -640 Vdd
FLAG 1472 -784 Vdd
FLAG 1072 -112 V_cm_fb
FLAG 1008 -400 Vin_p
FLAG 1344 -400 Vin_n
FLAG 208 576 0
FLAG 752 -496 Vo_n
FLAG 1552 -496 Vo_p
FLAG 2272 -816 Vo_p
FLAG 1888 -816 Vo_n
FLAG 1568 -432 0
FLAG 736 -432 0
FLAG 1056 304 Vo_n
FLAG 1040 560 Vo_p
FLAG 512 304 Vin_p
FLAG 512 560 Vin_n
FLAG 1456 384 0
FLAG 1456 480 0
FLAG 1376 384 V_RC_p
FLAG 1376 480 V_RC_n
FLAG 784 -112 Vb_NMOS
FLAG 1520 -112 Vb_NMOS
FLAG 2080 -672 V_cm_fb
FLAG 1600 -176 0
FLAG 256 -208 Vn_bias
FLAG 800 -176 0
FLAG 336 -256 Vn_bias_casc
FLAG 1136 -256 Vn_bias_casc
FLAG 272 -704 Vp_bias
FLAG 1648 -240 Vn_bias
FLAG 544 320 0
FLAG 544 544 0
FLAG 688 -688 Vdd
FLAG 592 -656 Vp_bias
FLAG 1616 -688 Vdd
FLAG 1744 -656 Vp_bias
DATAFLAG 912 -208 "round($*10k)/10k"
DATAFLAG 1184 -384 "round($*10k)/10k"
DATAFLAG 1232 -208 "round($*10k)/10k"
DATAFLAG 992 -720 "round($*100)/100"
DATAFLAG 1440 -208 "round($*10k)/10k"
DATAFLAG 1360 -720 "round($*100)/100"
DATAFLAG 1376 -880 "round($*1k)/1k"
DATAFLAG 1472 -560 "round($*1k)/1k"
DATAFLAG 1088 -608 "Id(M1)"
DATAFLAG 2064 -816 ""
DATAFLAG 320 -816 "round($*100)/100"
DATAFLAG 304 -672 "round($*10k)/10k"
DATAFLAG 384 -112 "round($*10k)/10k"
DATAFLAG 816 -368 "Id(M11)"
DATAFLAG 960 -832 "-Id(M5)"
DATAFLAG 1104 -208 "Id(M4)"
DATAFLAG 1104 -112 "round($*10k)/10k"
DATAFLAG 384 -208 "round($*10k)/10k"
DATAFLAG 800 -256 "round($*10k)/10k"
DATAFLAG 208 -704 "round($*10k)/10k"
DATAFLAG 1264 -608 "Id(M1)"
DATAFLAG 816 -672 ""
DATAFLAG 832 -496 ""
SYMBOL nmos4 1040 -480 R0
SYMATTR InstName M1
SYMATTR Value nch
SYMATTR Value2 l=0.36u w=22u m=4
SYMBOL nmos4 1136 -336 R0
SYMATTR InstName M3
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL nmos4 1136 -192 R0
SYMATTR InstName M4
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL pmos4 832 -592 M180
SYMATTR InstName M10
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL nmos4 832 -336 R0
SYMATTR InstName M11
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_casc}
SYMBOL nmos4 832 -192 R0
SYMATTR InstName M12
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_casc}
SYMBOL voltage 2256 -640 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 1.8
SYMBOL pmos4 832 -736 M180
SYMATTR InstName M5
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL res 2032 -832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100Meg
SYMBOL res 2256 -832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100Meg
SYMBOL nmos4 256 -192 M0
SYMATTR InstName M13
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL current 208 -496 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value 0.3m
SYMBOL nmos4 256 -336 M0
SYMATTR InstName M14
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL current 16 -496 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 25 75 Left 2
SYMATTR Value 4.3m
SYMATTR InstName I2
SYMBOL nmos4 64 -192 M0
SYMATTR InstName M15
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL pmos4 256 -736 R180
SYMATTR InstName M16
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL pmos4 256 -592 R180
SYMATTR InstName M17
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL pmos4 64 -704 R180
SYMATTR InstName M18
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc_b}
SYMBOL nmos4 1312 -480 M0
SYMATTR InstName M2
SYMATTR Value nch
SYMATTR Value2 l=0.36u w=22u m=4
SYMBOL pmos4 1520 -592 R180
SYMATTR InstName M6
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL nmos4 1520 -336 M0
SYMATTR InstName M7
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_Casc} m={Mn_casc}
SYMBOL nmos4 1520 -192 M0
SYMATTR InstName M8
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_Casc} m={Mn_casc}
SYMBOL pmos4 1520 -736 R180
SYMATTR InstName M9
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL cap 368 -112 R0
SYMATTR InstName C2
SYMATTR Value 1000µ
SYMBOL cap 640 288 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 15p
SYMBOL cap 800 192 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 1.5p
SYMBOL cap 640 576 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C6
SYMATTR Value 20p
SYMBOL cap 800 672 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C7
SYMATTR Value 2p
SYMBOL voltage 208 480 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value {Vcm}
SYMBOL voltage 512 288 M0
WINDOW 3 24 44 Left 2
WINDOW 123 24 72 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 0.05)
SYMATTR Value2 AC 0.5
SYMATTR InstName V4
SYMBOL voltage 512 448 M0
WINDOW 3 24 44 Left 2
WINDOW 123 24 72 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 0.05)
SYMATTR Value2 AC 0.5
SYMATTR InstName V5
SYMBOL res 672 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 100Meg
SYMBOL res 832 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1G
SYMBOL res 656 640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100Meg
SYMBOL res 816 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 1G
SYMBOL cap 720 -496 R0
SYMATTR InstName C1
SYMATTR Value {Cload}
SYMBOL cap 1552 -496 R0
SYMATTR InstName C9
SYMATTR Value {Cload}
SYMBOL res 1360 288 R0
WINDOW 3 151 69 Invisible 2
SYMATTR Value 10Meg
SYMATTR InstName R7
SYMBOL res 1360 464 R0
WINDOW 3 36 76 Invisible 2
SYMATTR Value 10Meg
SYMATTR InstName R8
SYMBOL cap 1456 368 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 Invisible 2
SYMATTR InstName C5
SYMATTR Value 1000µ
SYMBOL cap 1392 496 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 Invisible 2
SYMATTR InstName C8
SYMATTR Value 1000µ
SYMBOL cap 1088 -112 R0
SYMATTR InstName C10
SYMATTR Value 1000µ
SYMBOL voltage 2080 -768 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 0.35
SYMBOL e 1600 -272 M0
SYMATTR InstName E1
SYMATTR Value {Aol}
SYMBOL e 800 -272 R0
SYMATTR InstName E2
SYMATTR Value {Aol}
SYMBOL cap 416 -880 R0
SYMATTR InstName C11
SYMATTR Value 1000µ
SYMBOL GB-NMOS 688 -640 R0
SYMATTR InstName X1
SYMBOL GB-NMOS 1616 -640 M0
SYMATTR InstName X2
TEXT -608 -1024 Left 2 !.lib 'C:\\Program Files (x86)\\LTC\\LTspiceIV\\lib\\cmp\\log018.l' TT
TEXT -576 -920 Left 2 !;tran 100n
TEXT -576 -960 Left 2 !.lib opamp.sub
TEXT -576 -880 Left 2 !;op
TEXT -576 -848 Left 2 !.ac dec 100 100 1G
TEXT 1888 -448 Left 2 !.param Wn_casc= 55u, Mn_casc=3 , Ln_casc=0.36u*Mn_casc , Mn_tail= Mn_casc*2
TEXT 1880 -400 Left 2 !.param Wp_casc=52u, Mp_casc = Mn_casc*2, Lp_casc=0.36u*Mn_casc
TEXT 1888 -352 Left 2 !.param Wp_casc_top=28u, Mp_casc_top = 7*Mn_casc, Lp_casc_top = 0.36u*Mn_casc
TEXT 1888 -296 Left 2 !.param Vcm=0.90, Cload=1.5p
TEXT 1896 -128 Left 2 ;F(x) = 20*log10(abs(V(Vin_p,Vin_n)/1)+1n)
TEXT 2840 -352 Left 2 ;Top PMOS dimensions
TEXT 2840 -400 Left 2 ;PMOS Cascode Dimensions
TEXT 2840 -448 Left 2 ;NMOS Cascode Dimensions - with Main M factor
TEXT -600 -760 Left 2 !.param Mp_casc_b=Mp_casc*2
TEXT 1888 -248 Left 2 !.param Aol = 80
TEXT -592 240 Left 2 ;For open loop, short the left side of input capacitance. (Since Ideal Source)
TEXT 1880 -200 Left 2 ;Aol of 80 will get 100db
