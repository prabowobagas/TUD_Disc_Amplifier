Version 4
SHEET 1 5520 2052
WIRE 304 -848 112 -848
WIRE 448 -848 304 -848
WIRE 528 -848 448 -848
WIRE 608 -848 528 -848
WIRE 1072 -848 1024 -848
WIRE 1264 -848 1072 -848
WIRE 1472 -848 1264 -848
WIRE 1520 -848 1472 -848
WIRE 1616 -848 1520 -848
WIRE 304 -800 304 -848
WIRE 304 -800 288 -800
WIRE 1024 -800 1024 -848
WIRE 1040 -800 1024 -800
WIRE 1616 -800 1616 -848
WIRE 1616 -800 1600 -800
WIRE 112 -784 112 -848
WIRE 112 -784 96 -784
WIRE 416 -784 352 -784
WIRE 464 -784 416 -784
WIRE 528 -784 464 -784
WIRE 1232 -784 976 -784
WIRE 1360 -784 1232 -784
WIRE 1472 -784 1360 -784
WIRE 1664 -784 1472 -784
WIRE 112 -768 112 -784
WIRE 208 -752 160 -752
WIRE 288 -752 288 -800
WIRE 304 -752 288 -752
WIRE 1040 -752 1040 -800
WIRE 1040 -752 1024 -752
WIRE 1600 -752 1600 -800
WIRE 1616 -752 1600 -752
WIRE 96 -720 96 -784
WIRE 112 -720 96 -720
WIRE 1024 -688 1024 -704
WIRE 1024 -688 960 -688
WIRE 1136 -688 1024 -688
WIRE 1232 -688 1136 -688
WIRE 1504 -688 1408 -688
WIRE 1616 -688 1616 -704
WIRE 1616 -688 1504 -688
WIRE 1696 -688 1616 -688
WIRE 304 -672 304 -704
WIRE 352 -672 304 -672
WIRE 368 -672 352 -672
WIRE 304 -656 304 -672
WIRE 304 -656 288 -656
WIRE 1024 -656 1024 -688
WIRE 1040 -656 1024 -656
WIRE 1616 -656 1616 -688
WIRE 1616 -656 1600 -656
WIRE 112 -640 112 -672
WIRE 208 -640 208 -752
WIRE 208 -640 112 -640
WIRE 352 -640 208 -640
WIRE 416 -640 352 -640
WIRE 544 -640 416 -640
WIRE 560 -640 544 -640
WIRE 976 -640 928 -640
WIRE 1680 -640 1664 -640
WIRE 1728 -640 1680 -640
WIRE 1936 -624 1920 -624
WIRE 288 -608 288 -656
WIRE 304 -608 288 -608
WIRE 928 -608 928 -640
WIRE 928 -608 912 -608
WIRE 1040 -608 1040 -656
WIRE 1040 -608 1024 -608
WIRE 1600 -608 1600 -656
WIRE 1616 -608 1600 -608
WIRE 1680 -608 1680 -640
WIRE 1712 -608 1680 -608
WIRE 736 -576 736 -624
WIRE 960 -576 960 -688
WIRE 960 -576 736 -576
WIRE 1696 -576 1696 -688
WIRE 1936 -576 1936 -624
WIRE 1936 -576 1696 -576
WIRE 304 -528 304 -560
WIRE 464 -528 464 -784
WIRE 464 -528 304 -528
WIRE 2000 -512 1984 -512
WIRE 2048 -512 2000 -512
WIRE 2176 -512 2128 -512
WIRE 2192 -512 2176 -512
WIRE 2272 -512 2192 -512
WIRE 2384 -512 2352 -512
WIRE 2400 -512 2384 -512
WIRE 112 -464 112 -640
WIRE 304 -464 304 -528
WIRE 976 -464 928 -464
WIRE 1024 -464 1024 -560
WIRE 1024 -464 976 -464
WIRE 1616 -464 1616 -560
WIRE 1664 -464 1616 -464
WIRE 1728 -464 1664 -464
WIRE 2128 -464 2016 -464
WIRE 1232 -448 1232 -688
WIRE 1408 -448 1408 -688
WIRE 2128 -448 2128 -464
WIRE 2192 -448 2192 -512
WIRE 2016 -416 2016 -464
WIRE 1248 -400 1232 -400
WIRE 1408 -400 1392 -400
WIRE 1184 -368 1152 -368
WIRE 1488 -368 1456 -368
WIRE 304 -352 304 -384
WIRE 384 -352 304 -352
WIRE 1248 -352 1248 -400
WIRE 1248 -352 1232 -352
WIRE 1328 -352 1248 -352
WIRE 1392 -352 1392 -400
WIRE 1392 -352 1328 -352
WIRE 1408 -352 1392 -352
WIRE 1024 -336 1024 -464
WIRE 1616 -336 1616 -464
WIRE 304 -304 304 -352
WIRE 1328 -304 1328 -352
WIRE 1040 -288 1024 -288
WIRE 1616 -288 1600 -288
WIRE 2160 -272 2160 -304
WIRE 304 -256 288 -256
WIRE 944 -256 928 -256
WIRE 976 -256 944 -256
WIRE 1344 -256 1328 -256
WIRE 1696 -256 1664 -256
WIRE 1728 -256 1696 -256
WIRE 752 -240 704 -240
WIRE 1040 -240 1040 -288
WIRE 1040 -240 1024 -240
WIRE 1600 -240 1600 -288
WIRE 1616 -240 1600 -240
WIRE 1936 -240 1920 -240
WIRE 112 -224 112 -384
WIRE 176 -224 112 -224
WIRE 352 -224 176 -224
WIRE 416 -224 352 -224
WIRE 432 -224 416 -224
WIRE 288 -208 288 -256
WIRE 304 -208 288 -208
WIRE 976 -208 976 -256
WIRE 976 -208 960 -208
WIRE 1344 -208 1344 -256
WIRE 1344 -208 1328 -208
WIRE 1664 -208 1664 -256
WIRE 1680 -208 1664 -208
WIRE 304 -176 304 -208
WIRE 352 -176 304 -176
WIRE 480 -176 352 -176
WIRE 704 -176 704 -240
WIRE 1024 -176 1024 -240
WIRE 1024 -176 704 -176
WIRE 1056 -176 1024 -176
WIRE 1328 -176 1328 -208
WIRE 1376 -176 1328 -176
WIRE 1616 -176 1616 -240
WIRE 1936 -176 1936 -240
WIRE 1936 -176 1616 -176
WIRE 112 -160 112 -224
WIRE 304 -160 304 -176
WIRE 1024 -160 1024 -176
WIRE 1328 -160 1328 -176
WIRE 1616 -160 1616 -176
WIRE 176 -80 176 -224
WIRE 176 -80 160 -80
WIRE 384 -80 384 -352
WIRE 384 -80 352 -80
WIRE 480 -80 384 -80
WIRE 976 -80 480 -80
WIRE 1248 -80 976 -80
WIRE 1280 -80 1248 -80
WIRE 1664 -80 1280 -80
WIRE 112 -16 112 -64
WIRE 304 -16 304 -64
WIRE 304 -16 112 -16
WIRE 480 -16 304 -16
WIRE 1024 -16 1024 -64
WIRE 1024 -16 480 -16
WIRE 1328 -16 1328 -64
WIRE 1328 -16 1024 -16
WIRE 1616 -16 1616 -64
WIRE 1616 -16 1328 -16
WIRE 1328 32 1328 -16
FLAG 1328 -112 0
FLAG 1328 32 0
FLAG 1024 -112 0
FLAG 304 -112 0
FLAG 112 -112 0
FLAG 1616 -112 0
FLAG 448 -848 Vdd_bias
FLAG 1360 -784 V_cm_fb
FLAG 1152 -368 Vin_p
FLAG 1488 -368 Vin_n
FLAG 928 -464 Vo_n
FLAG 1728 -464 Vo_p
FLAG 352 -176 Vn_bias
FLAG 432 -224 Vn_bias_casc
FLAG 1280 -224 Vn_bias_casc
FLAG 352 -672 Vp_bias
FLAG 1072 -848 Vdd_amp
FLAG 1264 -848 Vdd
FLAG 1824 -688 Vdd_amp
FLAG 1792 -688 Vdd_bias
FLAG 1920 -656 Vp_bias
FLAG 544 -640 Vp_casc_bias
FLAG 736 -656 Vp_bias
FLAG 832 -688 Vdd_amp
FLAG 864 -688 Vdd_bias
FLAG 880 -304 Vdd_bias
FLAG 848 -304 Vdd_amp
FLAG 752 -272 Vn_bias
FLAG 1920 -272 Vn_bias
FLAG 928 -704 0
FLAG 1680 -704 0
FLAG 2384 -512 Vo_p
FLAG 2000 -512 Vo_n
FLAG 2160 -272 V_cm_fb
FLAG 2224 -352 Vdd_bias
FLAG 2224 -384 Vdd_amp
FLAG 2016 -336 0
FLAG 944 -320 0
FLAG 1696 -320 0
FLAG 1792 -304 Vdd_bias
FLAG 1824 -304 Vdd_amp
DATAFLAG 1328 -352 "round($*10k)/10k"
DATAFLAG 1376 -176 "round($*10k)/10k"
DATAFLAG 1136 -688 "round($*100)/100"
DATAFLAG 1504 -688 "round($*100)/100"
DATAFLAG 1520 -848 "round($*1k)/1k"
DATAFLAG 1664 -464 "round($*1k)/1k"
DATAFLAG 416 -784 "round($*100)/100"
DATAFLAG 416 -640 "round($*10k)/10k"
DATAFLAG 480 -80 "round($*10k)/10k"
DATAFLAG 1248 -80 "round($*10k)/10k"
DATAFLAG 480 -176 "round($*10k)/10k"
DATAFLAG 304 -672 "round($*10k)/10k"
DATAFLAG 976 -464 "round($*1k)/1k"
DATAFLAG 1232 -784 "round($*100)/100"
DATAFLAG 416 -224 "round($*10k)/10k"
DATAFLAG 1616 -176 "round($*10k)/10k"
DATAFLAG 1056 -176 "round($*10k)/10k"
DATAFLAG 2176 -512 ""
DATAFLAG 1200 -544 "round(-Id(x1:M7)*100Meg)/100meg"
DATAFLAG 1072 -416 "-round(-Id(x1:M5)*100Meg)/100meg"
DATAFLAG 1680 -208 "round($*10k)/10k"
DATAFLAG 960 -208 "round($*10k)/10k"
DATAFLAG 912 -608 "round($*100)/100"
DATAFLAG 1712 -608 "round($*100)/100"
SYMBOL nmos4 1184 -448 R0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M1
SYMATTR Value nch
SYMATTR Value2 l={L_input} w={W_input} m={M_input}
SYMBOL nmos4 1280 -304 R0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M2
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL nmos4 1280 -160 R0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M3
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL pmos4 976 -560 M180
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M4
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL nmos4 976 -336 R0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M5
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_casc}
SYMBOL nmos4 976 -160 R0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M6
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_casc}
SYMBOL pmos4 976 -704 M180
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M7
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL nmos4 352 -160 M0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M8
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL current 304 -464 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value 0.04m
SYMBOL nmos4 352 -304 M0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M9
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL current 112 -464 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 25 75 Left 2
SYMATTR Value 0.352m
SYMATTR InstName I2
SYMBOL nmos4 160 -160 M0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M10
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL pmos4 352 -704 R180
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M11
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL pmos4 352 -560 R180
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M12
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL pmos4 160 -672 R180
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M13
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc_b}
SYMBOL nmos4 1456 -448 M0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M14
SYMATTR Value nch
SYMATTR Value2 l={L_input} w={W_input} m={M_input}
SYMBOL pmos4 1664 -560 R180
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M15
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL nmos4 1664 -336 M0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M16
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_Casc} m={Mn_casc}
SYMBOL nmos4 1664 -160 M0
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M17
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_Casc} m={Mn_casc}
SYMBOL pmos4 1664 -704 R180
WINDOW 0 56 32 Invisible 2
WINDOW 3 56 72 Invisible 2
SYMATTR InstName M18
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL cap 464 -80 R0
SYMATTR InstName C1
SYMATTR Value 1000µ
SYMBOL cap 512 -848 R0
SYMATTR InstName C4
SYMATTR Value 1000µ
SYMBOL cap 912 -704 R0
SYMATTR InstName C7
SYMATTR Value 0.3p
SYMBOL cap 1664 -704 R0
SYMATTR InstName C8
SYMATTR Value 0.3p
SYMBOL res 2144 -528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1G noiseless
SYMBOL res 2368 -528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1G noiseless
SYMBOL CMFB_Amplifier_comp_model 2160 -384 R90
SYMATTR InstName X5
SYMBOL voltage 2016 -432 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 0.9
SYMBOL cap 1456 -848 R0
SYMATTR InstName C2
SYMATTR Value 1000µ
SYMBOL cap 1680 -320 R0
SYMATTR InstName C3
SYMATTR Value 0.3p
SYMBOL cap 928 -320 R0
SYMATTR InstName C5
SYMATTR Value 0.3p
SYMBOL GB-NMOS_1x 832 -640 R0
SYMATTR InstName X7
SYMBOL GB-NMOS_1x 1824 -640 M0
SYMATTR InstName X8
SYMBOL GB-PMOS_1x 848 -256 R0
SYMATTR InstName X6
SYMBOL GB-PMOS_1x 1824 -256 M0
SYMATTR InstName X9
TEXT 1096 224 Left 2 !.lib 'C:\\Program Files (x86)\\LTC\\LTspiceIV\\lib\\cmp\\log018.l' TT
TEXT 864 256 Left 2 !.tran 200n
TEXT 864 216 Left 2 !.lib opamp.sub
TEXT 864 296 Left 2 !;op
TEXT 864 328 Left 2 !;ac dec 100 100 5G
TEXT 0 464 Left 2 !.param Wn_casc=10.8u Mn_casc=M_size Ln_casc=0.72u Mn_tail=Mn_casc*2
TEXT 0 512 Left 2 !.param Wp_casc=9.46u Mp_casc=M_size Lp_casc=0.54u
TEXT 0 560 Left 2 !.param Wp_casc_top=12.1u Mp_casc_top=M_size Lp_casc_top=0.54u
TEXT -24 920 Left 2 ;F(x) = 20*log10(abs(V(Vin_p,Vin_n)/1)+1n)
TEXT 1032 600 Left 2 ;Top PMOS dimensions
TEXT 1032 552 Left 2 ;PMOS Cascode Dimensions
TEXT 1096 456 Left 2 ;NMOS Cascode Dimensions - with Main M factor
TEXT 0 712 Left 2 !.param Mp_casc_b=Mp_casc*2
TEXT 0 664 Left 2 !.param W_input=27u L_input=0.54u M_input=1
TEXT -16 992 Left 2 !;noise V(Vo_p,Vo_n) V2 dec 100 100 100G
TEXT -32 272 Left 2 ;Current Control
TEXT -32 392 Left 2 !.param I_bias=0.020m*M_size I_bias_casc=0.176m*M_size
TEXT -8 352 Left 2 !.param M_size=2
