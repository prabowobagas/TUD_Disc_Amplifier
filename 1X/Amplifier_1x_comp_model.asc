Version 4
SHEET 1 5520 2052
WIRE 176 -848 -16 -848
WIRE 320 -848 176 -848
WIRE 400 -848 320 -848
WIRE 480 -848 400 -848
WIRE 1072 -848 1024 -848
WIRE 1264 -848 1072 -848
WIRE 1472 -848 1264 -848
WIRE 1616 -848 1472 -848
WIRE 2208 -816 2192 -816
WIRE 2256 -816 2208 -816
WIRE 2400 -816 2336 -816
WIRE 2480 -816 2400 -816
WIRE 2592 -816 2560 -816
WIRE 2608 -816 2592 -816
WIRE 176 -800 176 -848
WIRE 1024 -800 1024 -848
WIRE 1616 -800 1616 -848
WIRE 336 -784 224 -784
WIRE 400 -784 336 -784
WIRE 1360 -784 976 -784
WIRE 1472 -784 1360 -784
WIRE 1664 -784 1472 -784
WIRE -16 -768 -16 -848
WIRE 2336 -768 2224 -768
WIRE 80 -752 32 -752
WIRE 2336 -752 2336 -768
WIRE 2400 -752 2400 -816
WIRE 2224 -720 2224 -768
WIRE 1024 -688 1024 -704
WIRE 1024 -688 960 -688
WIRE 1232 -688 1024 -688
WIRE 1616 -688 1616 -704
WIRE 1616 -688 1408 -688
WIRE 1696 -688 1616 -688
WIRE 176 -672 176 -704
WIRE 224 -672 176 -672
WIRE 240 -672 224 -672
WIRE 176 -656 176 -672
WIRE 1024 -656 1024 -688
WIRE 1616 -656 1616 -688
WIRE -16 -640 -16 -672
WIRE 80 -640 80 -752
WIRE 80 -640 -16 -640
WIRE 224 -640 80 -640
WIRE 416 -640 224 -640
WIRE 432 -640 416 -640
WIRE 976 -640 928 -640
WIRE 1680 -640 1664 -640
WIRE 1888 -624 1872 -624
WIRE 1888 -608 1888 -624
WIRE 1888 -608 1856 -608
WIRE 736 -576 736 -624
WIRE 960 -576 960 -688
WIRE 960 -576 736 -576
WIRE 1696 -576 1696 -688
WIRE 1888 -576 1888 -608
WIRE 1888 -576 1696 -576
WIRE 2368 -576 2368 -608
WIRE 176 -528 176 -560
WIRE 336 -528 336 -784
WIRE 336 -528 176 -528
WIRE -16 -464 -16 -640
WIRE 176 -464 176 -528
WIRE 944 -464 928 -464
WIRE 1024 -464 1024 -560
WIRE 1024 -464 944 -464
WIRE 1616 -464 1616 -560
WIRE 1712 -464 1616 -464
WIRE 1728 -464 1712 -464
WIRE 1232 -448 1232 -688
WIRE 1408 -448 1408 -688
WIRE 1184 -368 1152 -368
WIRE 1488 -368 1456 -368
WIRE 176 -352 176 -384
WIRE 256 -352 176 -352
WIRE 1328 -352 1232 -352
WIRE 1408 -352 1328 -352
WIRE 1024 -336 1024 -464
WIRE 1616 -336 1616 -464
WIRE 176 -304 176 -352
WIRE 1328 -304 1328 -352
WIRE 944 -256 928 -256
WIRE 976 -256 944 -256
WIRE 1696 -256 1664 -256
WIRE 1712 -256 1696 -256
WIRE 752 -240 704 -240
WIRE 1904 -240 1888 -240
WIRE -16 -224 -16 -384
WIRE 48 -224 -16 -224
WIRE 224 -224 48 -224
WIRE 304 -224 224 -224
WIRE 1024 -208 1024 -240
WIRE 1024 -208 912 -208
WIRE 176 -176 176 -208
WIRE 224 -176 176 -176
WIRE 352 -176 224 -176
WIRE 1024 -176 1024 -208
WIRE 1056 -176 1024 -176
WIRE 1328 -176 1328 -208
WIRE 1376 -176 1328 -176
WIRE 1616 -176 1616 -240
WIRE 1904 -176 1904 -240
WIRE 1904 -176 1616 -176
WIRE -16 -160 -16 -224
WIRE 176 -160 176 -176
WIRE 1024 -160 1024 -176
WIRE 1328 -160 1328 -176
WIRE 1616 -160 1616 -176
WIRE 704 -144 704 -240
WIRE 912 -144 912 -208
WIRE 912 -144 704 -144
WIRE 48 -80 48 -224
WIRE 48 -80 32 -80
WIRE 256 -80 256 -352
WIRE 256 -80 224 -80
WIRE 352 -80 256 -80
WIRE 976 -80 352 -80
WIRE 1280 -80 976 -80
WIRE 1664 -80 1280 -80
WIRE -16 -16 -16 -64
WIRE 176 -16 176 -64
WIRE 176 -16 -16 -16
WIRE 352 -16 176 -16
WIRE 1024 -16 1024 -64
WIRE 1024 -16 352 -16
WIRE 1328 -16 1328 -64
WIRE 1328 -16 1024 -16
WIRE 1616 -16 1616 -64
WIRE 1616 -16 1328 -16
WIRE 1328 32 1328 -16
FLAG 1232 -400 0
FLAG 1328 -256 0
FLAG 1328 -112 0
FLAG 1328 32 0
FLAG 1024 -288 0
FLAG 1024 -112 0
FLAG 1024 -608 Vdd
FLAG 1024 -752 Vdd
FLAG 176 -112 0
FLAG -16 -112 0
FLAG 176 -256 0
FLAG 176 -752 Vdd
FLAG 176 -608 Vdd
FLAG -16 -720 Vdd
FLAG 1408 -400 0
FLAG 1616 -288 0
FLAG 1616 -112 0
FLAG 320 -848 Vdd_bias
FLAG 1616 -608 Vdd
FLAG 1616 -752 Vdd
FLAG 1360 -784 V_cm_fb
FLAG 1152 -368 Vin_p
FLAG 1488 -368 Vin_n
FLAG 944 -464 Vo_n
FLAG 1712 -464 Vo_p
FLAG 224 -176 Vn_bias
FLAG 304 -224 Vn_bias_casc
FLAG 1280 -224 Vn_bias_casc
FLAG 224 -672 Vp_bias
FLAG 1072 -848 Vdd_amp
FLAG 1264 -848 Vdd
FLAG 1776 -688 Vdd_amp
FLAG 1744 -688 Vdd_bias
FLAG 1872 -656 Vp_bias
FLAG 416 -640 Vp_casc_bias
FLAG 736 -656 Vp_bias
FLAG 832 -688 Vdd_amp
FLAG 864 -688 Vdd_bias
FLAG 880 -304 Vdd_bias
FLAG 848 -304 Vdd_amp
FLAG 1760 -304 Vdd_bias
FLAG 1792 -304 Vdd_amp
FLAG 752 -272 Vn_bias
FLAG 1888 -272 Vn_bias
FLAG 928 -704 0
FLAG 1680 -704 0
FLAG 2592 -816 Vo_p
FLAG 2208 -816 Vo_n
FLAG 2368 -576 V_cm_fb
FLAG 2432 -656 Vdd_bias
FLAG 2432 -688 Vdd_amp
FLAG 2224 -640 0
FLAG 944 -320 0
FLAG 1696 -320 0
DATAFLAG 1328 -352 "round($*10k)/10k"
DATAFLAG 1376 -176 "round($*10k)/10k"
DATAFLAG 1136 -688 "round($*100)/100"
DATAFLAG 1504 -688 "round($*100)/100"
DATAFLAG 1520 -848 "round($*1k)/1k"
DATAFLAG 1616 -528 "round($*1k)/1k"
DATAFLAG 1232 -576 "Id(M1)"
DATAFLAG 288 -784 "round($*100)/100"
DATAFLAG 288 -640 "round($*10k)/10k"
DATAFLAG 352 -80 "round($*10k)/10k"
DATAFLAG 1104 -800 "-Id(M5)"
DATAFLAG 1248 -176 "Id(M4)"
DATAFLAG 1248 -80 "round($*10k)/10k"
DATAFLAG 352 -176 "round($*10k)/10k"
DATAFLAG 176 -672 "round($*10k)/10k"
DATAFLAG 1408 -576 "Id(x1:M1)"
DATAFLAG 1024 -528 "round($*1k)/1k"
DATAFLAG 1232 -784 ""
DATAFLAG 288 -224 "round($*10k)/10k"
DATAFLAG 1616 -176 "round($*10k)/10k"
DATAFLAG 1056 -176 "round($*10k)/10k"
DATAFLAG 960 -256 ""
DATAFLAG 2384 -816 ""
DATAFLAG 1024 -400 "Id(x1:M5)"
SYMBOL nmos4 1184 -448 R0
SYMATTR InstName M1
SYMATTR Value nch
SYMATTR Value2 l={L_input} w={W_input} m={M_input}
SYMBOL nmos4 1280 -304 R0
SYMATTR InstName M2
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL nmos4 1280 -160 R0
SYMATTR InstName M3
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL pmos4 976 -560 M180
SYMATTR InstName M4
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL nmos4 976 -336 R0
SYMATTR InstName M5
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_casc}
SYMBOL nmos4 976 -160 R0
SYMATTR InstName M6
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_casc}
SYMBOL pmos4 976 -704 M180
SYMATTR InstName M7
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL nmos4 224 -160 M0
SYMATTR InstName M8
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL current 176 -464 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value {I_bias}
SYMBOL nmos4 224 -304 M0
SYMATTR InstName M9
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL current -16 -464 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 25 75 Left 2
SYMATTR Value {I_bias_casc}
SYMATTR InstName I2
SYMBOL nmos4 32 -160 M0
SYMATTR InstName M10
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL pmos4 224 -704 R180
SYMATTR InstName M11
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL pmos4 224 -560 R180
SYMATTR InstName M12
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL pmos4 32 -672 R180
SYMATTR InstName M13
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc_b}
SYMBOL nmos4 1456 -448 M0
SYMATTR InstName M14
SYMATTR Value nch
SYMATTR Value2 l={L_input} w={W_input} m={M_input}
SYMBOL pmos4 1664 -560 R180
SYMATTR InstName M15
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL nmos4 1664 -336 M0
SYMATTR InstName M16
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_Casc} m={Mn_casc}
SYMBOL nmos4 1664 -160 M0
SYMATTR InstName M17
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_Casc} m={Mn_casc}
SYMBOL pmos4 1664 -704 R180
SYMATTR InstName M18
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL cap 336 -80 R0
SYMATTR InstName C1
SYMATTR Value 1000µ
SYMBOL cap 384 -848 R0
SYMATTR InstName C4
SYMATTR Value 1000µ
SYMBOL GB-NMOS 1776 -640 M0
SYMATTR InstName X1
SYMBOL GB-NMOS 832 -640 R0
SYMATTR InstName X2
SYMBOL GB-PMOS 848 -256 R0
SYMATTR InstName X3
SYMBOL GB-PMOS 1792 -256 M0
SYMATTR InstName X4
SYMBOL cap 912 -704 R0
SYMATTR InstName C7
SYMATTR Value {Cc}
SYMBOL cap 1664 -704 R0
SYMATTR InstName C8
SYMATTR Value {Cc}
SYMBOL res 2352 -832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1G noiseless
SYMBOL res 2576 -832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1G noiseless
SYMBOL CMFB_Amplifier_comp_model 2368 -688 R90
SYMATTR InstName X5
SYMBOL voltage 2224 -736 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 0.9
SYMBOL cap 1456 -848 R0
SYMATTR InstName C2
SYMATTR Value 1000µ
SYMBOL cap 1680 -320 R0
SYMATTR InstName C3
SYMATTR Value {Cc}
SYMBOL cap 928 -320 R0
SYMATTR InstName C5
SYMATTR Value {Cc}
TEXT -608 -1024 Left 2 !.lib 'C:\\Program Files (x86)\\LTC\\LTspiceIV\\lib\\cmp\\log018.l' TT
TEXT -576 -920 Left 2 !.tran 200n
TEXT -576 -960 Left 2 !.lib opamp.sub
TEXT -576 -880 Left 2 !;op
TEXT -576 -848 Left 2 !;ac dec 100 100 5G
TEXT 2232 -32 Left 2 !.param Wn_casc=8.1u Mn_casc=M_size Ln_casc=0.54u Mn_tail=Mn_casc*2
TEXT 2232 16 Left 2 !.param Wp_casc=7.1u Mp_casc=M_size Lp_casc=0.36u
TEXT 2232 64 Left 2 !.param Wp_casc_top=14.1u Mp_casc_top=M_size Lp_casc_top=0.36u
TEXT 2208 424 Left 2 ;F(x) = 20*log10(abs(V(Vin_p,Vin_n)/1)+1n)
TEXT 3264 104 Left 2 ;Top PMOS dimensions
TEXT 3264 56 Left 2 ;PMOS Cascode Dimensions
TEXT 3328 -40 Left 2 ;NMOS Cascode Dimensions - with Main M factor
TEXT 2232 216 Left 2 !.param Mp_casc_b=Mp_casc*2
TEXT 2232 168 Left 2 !.param W_input=18u L_input=0.36u M_input=3
TEXT 2216 496 Left 2 !;noise V(Vo_p,Vo_n) V2 dec 100 100 100G
TEXT 2200 -224 Left 2 ;Current Control
TEXT 2200 -104 Left 2 !.param I_bias=0.020m*M_size I_bias_casc=0.25m*M_size
TEXT 2224 336 Left 2 ;.step param Cc 0 1p 0.1p
TEXT 2232 376 Left 2 !.param Cc=0.01p
TEXT 2224 -144 Left 2 !.param M_size=5
