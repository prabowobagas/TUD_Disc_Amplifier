Version 4
SHEET 1 5520 2052
WIRE 2368 -1264 2352 -1264
WIRE 2416 -1264 2368 -1264
WIRE 2544 -1264 2496 -1264
WIRE 2560 -1264 2544 -1264
WIRE 2640 -1264 2560 -1264
WIRE 2752 -1264 2720 -1264
WIRE 2768 -1264 2752 -1264
WIRE 2496 -1216 2384 -1216
WIRE 2496 -1200 2496 -1216
WIRE 2560 -1200 2560 -1264
WIRE 2384 -1168 2384 -1216
WIRE 2528 -1024 2528 -1056
WIRE 208 -880 16 -880
WIRE 352 -880 208 -880
WIRE 432 -880 352 -880
WIRE 880 -880 672 -880
WIRE 928 -880 880 -880
WIRE 1312 -880 928 -880
WIRE 1376 -880 1312 -880
WIRE 1472 -880 1376 -880
WIRE 1680 -880 1472 -880
WIRE 1984 -864 1952 -864
WIRE 2016 -864 1984 -864
WIRE 2128 -864 2096 -864
WIRE 2160 -864 2128 -864
WIRE 208 -832 208 -880
WIRE 880 -832 880 -880
WIRE 1472 -832 1472 -880
WIRE 1984 -832 1984 -864
WIRE 2128 -832 2128 -864
WIRE 320 -816 256 -816
WIRE 368 -816 320 -816
WIRE 432 -816 368 -816
WIRE 1088 -816 832 -816
WIRE 1216 -816 1088 -816
WIRE 1312 -816 1216 -816
WIRE 1520 -816 1312 -816
WIRE 16 -800 16 -880
WIRE 1680 -800 1680 -880
WIRE 112 -784 64 -784
WIRE 1632 -784 1584 -784
WIRE 672 -768 672 -880
WIRE 816 -752 720 -752
WIRE 672 -720 656 -720
WIRE 816 -720 816 -752
WIRE 880 -720 880 -736
WIRE 880 -720 816 -720
WIRE 992 -720 880 -720
WIRE 1088 -720 992 -720
WIRE 1360 -720 1264 -720
WIRE 1472 -720 1472 -736
WIRE 1472 -720 1360 -720
WIRE 1584 -720 1584 -784
WIRE 1584 -720 1472 -720
WIRE 208 -704 208 -736
WIRE 272 -704 208 -704
WIRE 208 -688 208 -704
WIRE 880 -688 880 -720
WIRE 1472 -688 1472 -720
WIRE 16 -672 16 -704
WIRE 112 -672 112 -784
WIRE 112 -672 16 -672
WIRE 256 -672 112 -672
WIRE 304 -672 256 -672
WIRE 784 -672 672 -672
WIRE 832 -672 784 -672
WIRE 1536 -672 1520 -672
WIRE 1680 -672 1680 -704
WIRE 1680 -672 1536 -672
WIRE 1088 -608 1088 -720
WIRE 1264 -608 1264 -720
WIRE 208 -560 208 -592
WIRE 368 -560 368 -816
WIRE 368 -560 208 -560
WIRE 880 -560 880 -592
WIRE 1472 -560 1472 -592
WIRE 16 -496 16 -672
WIRE 208 -496 208 -560
WIRE 752 -496 736 -496
WIRE 880 -496 880 -560
WIRE 880 -496 752 -496
WIRE 1472 -496 1472 -560
WIRE 1552 -496 1472 -496
WIRE 1568 -496 1552 -496
WIRE 1088 -480 1088 -608
WIRE 1264 -480 1264 -608
WIRE 1040 -400 1008 -400
WIRE 1344 -400 1312 -400
WIRE 208 -384 208 -416
WIRE 288 -384 208 -384
WIRE 672 -384 672 -672
WIRE 736 -384 672 -384
WIRE 1184 -384 1088 -384
WIRE 1264 -384 1184 -384
WIRE 1680 -368 1680 -672
WIRE 1680 -368 1584 -368
WIRE 208 -336 208 -384
WIRE 880 -336 880 -496
WIRE 1184 -336 1184 -384
WIRE 1472 -336 1472 -496
WIRE 16 -256 16 -416
WIRE 80 -256 16 -256
WIRE 256 -256 80 -256
WIRE 336 -256 256 -256
WIRE 736 -256 736 -384
WIRE 752 -256 736 -256
WIRE 832 -256 752 -256
WIRE 1584 -256 1584 -368
WIRE 1584 -256 1520 -256
WIRE 672 -224 672 -384
WIRE 208 -208 208 -240
WIRE 256 -208 208 -208
WIRE 384 -208 256 -208
WIRE 880 -208 880 -240
WIRE 880 -208 784 -208
WIRE 912 -208 880 -208
WIRE 1184 -208 1184 -240
WIRE 1232 -208 1184 -208
WIRE 1472 -208 1472 -240
WIRE 1520 -208 1472 -208
WIRE 1600 -208 1520 -208
WIRE 1680 -208 1680 -368
WIRE 16 -192 16 -256
WIRE 208 -192 208 -208
WIRE 880 -192 880 -208
WIRE 1184 -192 1184 -208
WIRE 1472 -192 1472 -208
WIRE 784 -144 784 -208
WIRE 784 -144 720 -144
WIRE 1600 -128 1600 -208
WIRE 1632 -128 1600 -128
WIRE 80 -112 80 -256
WIRE 80 -112 64 -112
WIRE 288 -112 288 -384
WIRE 288 -112 256 -112
WIRE 384 -112 288 -112
WIRE 784 -112 384 -112
WIRE 832 -112 784 -112
WIRE 1104 -112 832 -112
WIRE 1136 -112 1104 -112
WIRE 1520 -112 1136 -112
WIRE 16 -48 16 -96
WIRE 208 -48 208 -96
WIRE 208 -48 16 -48
WIRE 384 -48 208 -48
WIRE 672 -48 672 -128
WIRE 672 -48 384 -48
WIRE 880 -48 880 -96
WIRE 880 -48 672 -48
WIRE 1184 -48 1184 -96
WIRE 1184 -48 880 -48
WIRE 1472 -48 1472 -96
WIRE 1472 -48 1184 -48
WIRE 1680 -48 1680 -112
WIRE 1680 -48 1472 -48
WIRE 1184 0 1184 -48
WIRE 736 128 688 128
WIRE 864 128 816 128
WIRE 576 208 544 208
WIRE 688 208 688 128
WIRE 688 208 656 208
WIRE 736 208 688 208
WIRE 864 208 864 128
WIRE 864 208 800 208
WIRE 544 304 544 208
WIRE 576 304 544 304
WIRE 592 304 576 304
WIRE 688 304 688 208
WIRE 688 304 656 304
WIRE 768 304 688 304
WIRE 864 304 864 208
WIRE 1056 304 864 304
WIRE 368 464 208 464
WIRE 512 464 512 384
WIRE 512 464 368 464
WIRE 208 496 208 464
WIRE 512 560 512 544
WIRE 560 560 544 560
WIRE 576 560 560 560
WIRE 688 560 640 560
WIRE 736 560 688 560
WIRE 1040 560 864 560
WIRE 544 656 544 560
WIRE 560 656 544 656
WIRE 688 656 688 560
WIRE 688 656 640 656
WIRE 736 656 688 656
WIRE 864 656 864 560
WIRE 864 656 800 656
WIRE 688 736 688 656
WIRE 720 736 688 736
WIRE 864 736 864 656
WIRE 864 736 800 736
FLAG 1088 -432 0
FLAG 1184 -288 0
FLAG 1184 -144 0
FLAG 1184 0 0
FLAG 880 -288 0
FLAG 880 -144 0
FLAG 1984 -752 0
FLAG 1984 -864 Vdd_amp
FLAG 880 -640 Vdd
FLAG 880 -784 Vdd
FLAG 208 -144 0
FLAG 16 -144 0
FLAG 208 -288 0
FLAG 208 -784 Vdd
FLAG 208 -640 Vdd
FLAG 16 -752 Vdd
FLAG 1264 -432 0
FLAG 1472 -288 0
FLAG 1472 -144 0
FLAG 352 -880 Vdd_bias
FLAG 1472 -640 Vdd
FLAG 1472 -784 Vdd
FLAG 1216 -816 V_cm_fb
FLAG 1008 -400 Vin_p
FLAG 1344 -400 Vin_n
FLAG 208 576 0
FLAG 752 -496 Vo_n
FLAG 1552 -496 Vo_p
FLAG 2752 -1264 Vo_p
FLAG 2368 -1264 Vo_n
FLAG 1568 -432 0
FLAG 736 -432 0
FLAG 1056 304 Vo_n
FLAG 1040 560 Vo_p
FLAG 512 304 Vin_p
FLAG 512 560 Vin_n
FLAG 784 -112 Vb_NMOS
FLAG 256 -208 Vn_bias
FLAG 336 -256 Vn_bias_casc
FLAG 1136 -256 Vn_bias_casc
FLAG 272 -704 Vp_bias
FLAG 368 464 V_cm
FLAG 2528 -1024 V_cm_fb
FLAG 2128 -752 0
FLAG 2128 -864 Vdd_bias
FLAG 2592 -1104 Vdd_bias
FLAG 2592 -1136 Vdd_amp
FLAG 928 -880 Vdd_amp
FLAG 2384 -1088 0
FLAG 672 -176 0
FLAG 1680 -160 0
FLAG 656 -720 Vdd
FLAG 1680 -752 Vdd
FLAG 576 304 0
FLAG 560 560 0
DATAFLAG 912 -208 "round($*10k)/10k"
DATAFLAG 1184 -384 "round($*10k)/10k"
DATAFLAG 1232 -208 "round($*10k)/10k"
DATAFLAG 992 -720 "round($*100)/100"
DATAFLAG 1360 -720 "round($*100)/100"
DATAFLAG 1376 -880 "round($*1k)/1k"
DATAFLAG 1472 -560 "round($*1k)/1k"
DATAFLAG 1088 -608 "Id(M1)"
DATAFLAG 2544 -1264 ""
DATAFLAG 320 -816 "round($*100)/100"
DATAFLAG 304 -672 "round($*10k)/10k"
DATAFLAG 384 -112 "round($*10k)/10k"
DATAFLAG 816 -368 "Id(M11)"
DATAFLAG 960 -832 "-Id(M5)"
DATAFLAG 1104 -208 "Id(M4)"
DATAFLAG 1104 -112 "round($*10k)/10k"
DATAFLAG 384 -208 "round($*10k)/10k"
DATAFLAG 208 -704 "round($*10k)/10k"
DATAFLAG 1264 -608 "Id(M1)"
DATAFLAG 1536 -672 ""
DATAFLAG 880 -560 "round($*1k)/1k"
DATAFLAG 1088 -816 ""
DATAFLAG 1520 -208 "round($*10k)/10k"
DATAFLAG 752 -256 "round($*10k)/10k"
DATAFLAG 784 -208 "round($*10k)/10k"
DATAFLAG 1584 -368 "round($*10k)/10k"
DATAFLAG 784 -672 ""
SYMBOL nmos4 1040 -480 R0
SYMATTR InstName M1
SYMATTR Value nch
SYMATTR Value2 l={L_input} w={W_input} m={M_input}
SYMBOL nmos4 1136 -336 R0
SYMATTR InstName M3
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL nmos4 1136 -192 R0
SYMATTR InstName M4
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL pmos4 832 -592 M180
SYMATTR InstName M10
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL nmos4 832 -336 R0
SYMATTR InstName M11
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_casc}
SYMBOL nmos4 832 -192 R0
SYMATTR InstName M12
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_casc}
SYMBOL voltage 1984 -848 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 1.8
SYMBOL pmos4 832 -736 M180
SYMATTR InstName M5
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL res 2512 -1280 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1G noiseless
SYMBOL res 2736 -1280 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1G noiseless
SYMBOL nmos4 256 -192 M0
SYMATTR InstName M13
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL current 208 -496 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value {I_bias}
SYMBOL nmos4 256 -336 M0
SYMATTR InstName M14
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL current 16 -496 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 25 75 Left 2
SYMATTR Value {I_bias_casc}
SYMATTR InstName I2
SYMBOL nmos4 64 -192 M0
SYMATTR InstName M15
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_casc} m={Mn_tail}
SYMBOL pmos4 256 -736 R180
SYMATTR InstName M16
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL pmos4 256 -592 R180
SYMATTR InstName M17
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL pmos4 64 -704 R180
SYMATTR InstName M18
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc_b}
SYMBOL nmos4 1312 -480 M0
SYMATTR InstName M2
SYMATTR Value nch
SYMATTR Value2 l={L_input} w={W_input} m={M_input}
SYMBOL pmos4 1520 -592 R180
SYMATTR InstName M6
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc} w={Wp_casc} m={Mp_casc}
SYMBOL nmos4 1520 -336 M0
SYMATTR InstName M7
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_Casc} m={Mn_casc}
SYMBOL nmos4 1520 -192 M0
SYMATTR InstName M8
SYMATTR Value nch
SYMATTR Value2 l={Ln_casc} w={Wn_Casc} m={Mn_casc}
SYMBOL pmos4 1520 -736 R180
SYMATTR InstName M9
SYMATTR Value pch
SYMATTR Value2 l={Lp_casc_top} w={Wp_casc_top} m={Mp_casc_top}
SYMBOL cap 368 -112 R0
SYMATTR InstName C2
SYMATTR Value 1000u
SYMBOL cap 656 288 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 0.4p
SYMBOL cap 800 192 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 0.4p
SYMBOL cap 640 576 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C6
SYMATTR Value 0.4p
SYMBOL cap 800 672 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C7
SYMATTR Value 0.4p
SYMBOL voltage 208 480 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value {Vcm}
SYMBOL voltage 512 288 M0
WINDOW 3 24 44 Left 2
WINDOW 123 24 72 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 0.5)
SYMATTR Value2 AC 0.5
SYMATTR InstName V4
SYMBOL voltage 512 448 M0
WINDOW 3 24 44 Left 2
WINDOW 123 24 72 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 0.5)
SYMATTR Value2 AC 0.5
SYMATTR InstName V5
SYMBOL res 672 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 100Meg noiseless
SYMBOL res 832 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100Meg noiseless
SYMBOL res 656 640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100Meg noiseless
SYMBOL res 816 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 100Meg noiseless
SYMBOL cap 720 -496 R0
SYMATTR InstName C1
SYMATTR Value {Cload}
SYMBOL cap 1552 -496 R0
SYMATTR InstName C9
SYMATTR Value {Cload}
SYMBOL cap 416 -880 R0
SYMATTR InstName C11
SYMATTR Value 1000u
SYMBOL CMFB_Amplifier_comp_model 2528 -1136 R90
SYMATTR InstName X1
SYMBOL voltage 2128 -848 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 1.8
SYMBOL voltage 2384 -1184 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value 0.9
SYMBOL nmos4 720 -224 M0
SYMATTR InstName M19
SYMATTR Value nch
SYMATTR Value2 l={Ln_nested} w={Wn_nested} m={Mn_nested}
SYMBOL nmos4 1632 -208 R0
SYMATTR InstName M20
SYMATTR Value nch
SYMATTR Value2 l={Ln_nested} w={Wn_nested} m={Mn_nested}
SYMBOL pmos4 1632 -704 M180
SYMATTR InstName M21
SYMATTR Value pch
SYMATTR Value2 l={Lp_nested} w={Wp_nested} m={Mp_nested}
SYMBOL pmos4 720 -672 R180
SYMATTR InstName M22
SYMATTR Value pch
SYMATTR Value2 l={Lp_nested} w={Wp_nested} m={Mp_nested}
SYMBOL cap 1296 -880 R0
SYMATTR InstName C5
SYMATTR Value 1000u
TEXT -608 -1024 Left 2 !.lib 'C:\\Program Files (x86)\\LTC\\LTspiceIV\\lib\\cmp\\log018.l' TT
TEXT -576 -960 Left 2 !.lib opamp.sub
TEXT 2104 -80 Left 2 !.param Wn_casc= 4.1u, Mn_casc=1*N_Mfact, Ln_casc=0.50u*Mn_casc , Mn_tail= Mn_casc*2
TEXT 2104 -32 Left 2 !.param Wp_casc=7.1u, Mp_casc = Mn_casc, Lp_casc=0.50u*Mn_casc
TEXT 2104 16 Left 2 !.param Wp_casc_top=14.1u, Mp_casc_top = Mn_casc, Lp_casc_top = 0.50u*Mn_casc
TEXT 2104 64 Left 2 !.param Vcm=0.95, Cload=0.4p*N_Mfact
TEXT 2104 232 Left 2 ;F(x) = 20*log10(abs(V(Vin_p,Vin_n)/1)+1n)
TEXT 3048 8 Left 2 ;Top PMOS dimensions
TEXT 3048 -40 Left 2 ;PMOS Cascode Dimensions
TEXT 3048 -88 Left 2 ;NMOS Cascode Dimensions - with Main M factor
TEXT 2104 168 Left 2 !.param Mp_casc_b=Mp_casc*2
TEXT -592 240 Left 2 ;For open loop, short the left side of input capacitance. (Since Ideal Source)
TEXT 2104 120 Left 2 !.param W_input = 3.6u , L_input = 0.18u , M_input = N_Mfact
TEXT 2112 304 Left 2 !;noise V(Vo_p,Vo_n) V2 dec 100 100 100G
TEXT 2080 -232 Left 2 !.param N_Mfact = 1
TEXT 2080 -192 Left 2 ;Current Control
TEXT 2072 -152 Left 2 !.param I_bias = 0.020m * N_Mfact, I_bias_casc=0.150m*N_Mfact
TEXT 3400 -704 Left 2 !.param Wn_CMFB_tail = 20.2u, Ln_CMFB_tail=0.36u*Mn_CMFB_tail, Mn_CMFB_tail=3
TEXT 3392 -608 Left 2 !.param Wp_CMFB = 66.2u, Lp_CMFB =0.36u*Mp_CMFB , Mp_CMFB = Mn_CMFB_tail
TEXT 3392 -648 Left 2 !.param W_CMFB_in = 17.9u, L_CMFB_in =0.36u*M_CMFB_in , M_CMFB_in = Mn_CMFB_tail
TEXT 2144 -344 Left 2 !.options gmin=1e-12 abstol=1e-12 reltol=0.001
TEXT 2144 -304 Left 2 !.options srcsteps= 100
TEXT 2120 -464 Left 2 !;tran 0 100ns 0 10p
TEXT 2128 -424 Left 2 !;op
TEXT -608 792 Left 2 !;tran 0 100ns 0 10p
TEXT 2144 -376 Left 2 !.ac dec 100 100 100G
TEXT 1224 88 Left 2 !.param Wn_nested = 15u, Ln_nested = 0.18u*Mn_nested , Mn_nested = 1
TEXT 1224 136 Left 2 !.param Wp_nested = 20u, Lp_nested = 0.18u*Mn_nested , Mp_nested = 1
